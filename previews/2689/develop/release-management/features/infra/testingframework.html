<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>TestingFramework | oVirt</title>
<meta name="generator" content="Jekyll v3.9.1" />
<meta property="og:title" content="TestingFramework" />
<meta name="author" content="Dima Kuznetsov" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/2689/develop/release-management/features/infra/testingframework.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/2689/develop/release-management/features/infra/testingframework.html" />
<meta property="og:site_name" content="oVirt" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="TestingFramework" />
<meta name="twitter:site" content="@ovirt" />
<meta name="twitter:creator" content="@Dima Kuznetsov" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Dima Kuznetsov"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/2689/images/logo.svg"},"name":"Dima Kuznetsov"},"description":"oVirt is a free open-source virtualization solution for your entire enterprise","@type":"WebPage","headline":"TestingFramework","url":"https://ovirt.github.io/ovirt-site/previews/2689/develop/release-management/features/infra/testingframework.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/2689/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/2689/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/2689/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/2689/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/2689/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/2689/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2689/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2689/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2689/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2689/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2689/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <!-- Begin Jekyll Favicon tag v0.2.9 -->
<!-- Classic -->
<link rel="shortcut icon" href="/ovirt-site/previews/2689/favicon.ico">
<link rel="icon" sizes="48x48 32x32 16x16" href="/ovirt-site/previews/2689/favicon.ico">
  <link rel="icon" sizes="16x16" type="image/png" href="/ovirt-site/previews/2689/images/favicon-16x16.png">
  <link rel="icon" sizes="32x32" type="image/png" href="/ovirt-site/previews/2689/images/favicon-32x32.png">
  <link rel="icon" sizes="64x64" type="image/png" href="/ovirt-site/previews/2689/images/favicon-64x64.png">
  <link rel="icon" sizes="144x144" type="image/png" href="/ovirt-site/previews/2689/images/favicon-144x144.png">
<!-- Safari -->
  <link rel="apple-touch-icon" sizes="57x57" href="/ovirt-site/previews/2689/images/favicon-57x57.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/ovirt-site/previews/2689/images/favicon-76x76.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/ovirt-site/previews/2689/images/favicon-120x120.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/ovirt-site/previews/2689/images/favicon-152x152.png">
  <link rel="apple-touch-icon" sizes="167x167" href="/ovirt-site/previews/2689/images/favicon-167x167.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/ovirt-site/previews/2689/images/favicon-180x180.png">
<!-- Chrome -->
  <link rel="icon" sizes="192x192" href="/ovirt-site/previews/2689/images/favicon-192x192.png">
  <link rel="icon" sizes="96x96" href="/ovirt-site/previews/2689/images/favicon-96x96.png">
  <link rel="icon" sizes="48x48" href="/ovirt-site/previews/2689/images/favicon-48x48.png">
<link rel="manifest" href="/ovirt-site/previews/2689/manifest.webmanifest">
<!-- IE -->
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ovirt-site/previews/2689/images/favicon-144x144.png">
<meta name='msapplication-config' content="/ovirt-site/previews/2689/browserconfig.xml">
<!-- End Jekyll Favicon tag -->
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/2689/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/2689/images/logo.svg">      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/2689/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2689/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/2689/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2689/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2689//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2689//blogs.ovirt.org/'>Blog</a></li>              </ul>          </div>          <!-- /.navbar-collapse -->      </div>      <!-- /.container-fluid -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2689/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2689/develop/">
              <span property="name">Developers Community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2689/develop/release-management/">
              <span property="name">Release Management</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2689/develop/release-management/features/">
              <span property="name">Features (Design documents)</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2689/develop/release-management/features/infra/">
              <span property="name">Infra</span>
              <meta property="position" content="5" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <header class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/1e249ea8b9a62ba101cceb6e32797db5?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/1e249ea8b9a62ba101cceb6e32797db5?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy">
                  </div>
                  <span class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Dima Kuznetsov</span></p>
                      
                    </section>
                  </span>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/9ba64bad62810ce4f4d5ea0df5bb75c2?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/9ba64bad62810ce4f4d5ea0df5bb75c2?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy">
                  </div>
                  <span class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Yaniv Bronheim</span></p>
                      
                    </section>
                  </span>
                
              </header>
            </header>
          
        
        <section id="content" class="content container">
          <div class='alert alert-warning'>Feature pages are design documents that developers have created while collaborating on oVirt.<br><br>Most of them are&nbsp;<strong>outdated</strong>, but provide historical design context.<br><br>They are&nbsp;<strong>not</strong>&nbsp;user documentation and should not be treated as such.<br><br><a href='/ovirt-site/previews/2689/documentation/'>Documentation is available here.</a></div>

<h1 id="testing-framework">Testing Framework</h1>

<h2 id="summary">Summary</h2>

<p>We aim to build upstream system testing framework for oVirt and its related components (VDSM, vdsm-tool, Host-Deploy, Hosted-Engine, Registration tool and so on).</p>

<p>When integrating oVirt components for new build we need to run full set of system flows which can assure us that all related logical flows won’t get effected or changed due to regression or new behavior. This related to storage, network and virt flows all over the project.</p>

<h2 id="owners">Owners</h2>

<ul>
  <li>Yaniv Bronheim <a href="mailto:ybronhei@redhat.com">ybronhei@redhat.com</a></li>
  <li>Dima Kuznetsov <a href="mailto:dkuznets@redhat.com">dkuznets@redhat.com</a></li>
  <li>Saggi Mizrahi <a href="mailto:smizrahi@redhat.com">smizrahi@redhat.com</a></li>
</ul>

<h2 id="current-status">Current Status</h2>

<ul>
  <li>Design infrastructure.</li>
</ul>

<h2 id="detailed-description---prerequisites">Detailed Description - Prerequisites</h2>

<p>One RHEL7 hypervisor will provide the full environment infrastructure for testing. The host will run at least 5 separate virtual machines. 1 serves for engine setup, 2 serves as hyperivors (VDSM installation) and 2 serves as storage providers (nfs and iscsi). All Vms will work with same internal NAT for communication.
Before each run the setup will be initialized from scratch.</p>

<p><img src="/ovirt-site/previews/2689/images/wiki/TestingEnv.png" alt="" /></p>

<h4 id="creating-environment-flow">Creating Environment Flow</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  * Create templates (kick start) for each VM
  * Build RPMs
  * Setup resources
  * Provision repositories
  * Engine deploy
  * Jenkins run noise tests based on engine's python sdk
</code></pre></div></div>

<h5 id="first-phase">First phase</h5>

<p>In the first phase we wish to automate the bring-up of all system resources (networks/VMs).
The network is defined by a name and a prefix, for the sake of simplicity, there is only one network at the moment.
The virtual machines are defined by the following format:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>domains = {'engine': {'ip': '192.168.111.2',
                      'net': NETWORK_NAME,
                      'disks': [('vda', 'root', 'template')],
                      'script': './setup_engine.sh'},
           'storage_iscsi': {'ip': '192.168.111.3',
                             'net': NETWORK_NAME,
                             'disks': [('vda', 'root', 'template'),
                                       ('vdb', 'extra1', 'empty', '30G')],
                             'script': './setup_storage_iscsi.sh'},
          ...
</code></pre></div></div>

<p>With these definitions, we can both create the images/network/virt domains and clean up the machine that runs them, (so we can run the set-up) again in the future. Once the setup is done, we can begin using the engine through the REST api and run tests.</p>

<h5 id="second-phase">Second phase</h5>

<h5 id="third-phase">Third phase</h5>

<h2 id="benefit-to-ovirt">Benefit to oVirt</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  * Upstream contribution for system testings.
  * Easy cleanup and setup for new testing environment.
</code></pre></div></div>

<h2 id="steps-to-setup-testing-environment">Steps To setup Testing Environment</h2>

<h2 id="documentation--external-references">Documentation / External References</h2>

<h2 id="known-issues-for-followup">Known issues for followup</h2>




        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/2689/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/2689/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/2689/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/2689/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2022 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/release-management/features/infra/testingframework.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/master/source/develop/release-management/features/infra/testingframework.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
