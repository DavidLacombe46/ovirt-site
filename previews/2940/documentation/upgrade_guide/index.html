<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Upgrade Guide | oVirt</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Upgrade Guide" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/2940/documentation/upgrade_guide/" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/2940/documentation/upgrade_guide/" />
<meta property="og:site_name" content="oVirt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Upgrade Guide" />
<meta name="twitter:site" content="@ovirt" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"oVirt is a free open-source virtualization solution for your entire enterprise","headline":"Upgrade Guide","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/2940/images/logo.svg"}},"url":"https://ovirt.github.io/ovirt-site/previews/2940/documentation/upgrade_guide/"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/2940/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/2940/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/2940/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/2940/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/2940/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/2940/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2940/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2940/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2940/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2940/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2940/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <link href='/ovirt-site/previews/2940/favicon.ico' rel='shortcut icon' sizes='36x36 24x24 16x16' type='image/x-icon'/>
<link href='/ovirt-site/previews/2940/favicon.png' rel='icon' sizes='196x196' type='image/png'/>
<meta content='/ovirt-site/previews/2940/mstile-icon-128x128.png' name='msapplication-TileImage'/>
<meta content='transparent' name='msapplication-TileColor'/>
<link href='/ovirt-site/previews/2940/manifest.webmanifest' rel='manifest'/>
<meta content='/ovirt-site/previews/2940/browserconfig.xml' name='msapplication-config'/>
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/2940/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/2940/images/logo.svg">      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/2940/download/'>Download</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/2940/documentation/'>Documentation</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2940/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2940/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2940//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2940//blogs.ovirt.org/'>Blog</a></li>              </ul>          </div>          <!-- /.navbar-collapse -->      </div>      <!-- /.container-fluid -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2940/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2940/documentation/">
              <span property="name">Documentation</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
        
        <section id="content" class="content container">
          
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#ovirt-upgrade-overview">oVirt Upgrade Overview</a></li>
<li><a href="#upgrading-a-standalone-engine-local-database-environment">Upgrading a standalone Engine local database environment</a>
<ul class="sectlevel1">
<li><a href="#Upgrading_from_4-4">1. Upgrading from oVirt 4.4 to 4.5</a>
<ul class="sectlevel2">
<li><a href="#Upgrade_Prerequisites_4-4_local_db">1.1. Prerequisites</a></li>
<li><a href="#Updating_the_Red_Hat_Virtualization_Manager_4-4_local_db">1.2. Updating the oVirt Engine</a></li>
<li><a href="#Upgrading_the_Manager_to_4-5_4-4_local_db">1.3. Upgrading the oVirt Engine from 4.4 to 4.5</a></li>
<li><a href="#Upgrading_hosts_to_4-5_4-4_local_db">1.4. Migrating hosts oVirt 4.4 to 4.5</a></li>
<li><a href="#Changing_the_Cluster_Compatibility_Version_4-4_local_db">1.5. Changing the Cluster Compatibility Version</a></li>
<li><a href="#Changing_Virtual_Machine_Cluster_Compatibility_4-4_local_db">1.6. Changing Virtual Machine Cluster Compatibility</a></li>
<li><a href="#Changing_the_Data_Center_Compatibility_Version_4-4_local_db">1.7. Changing the Data Center Compatibility Version</a></li>
</ul>
</li>
<li><a href="#Upgrading_from_4-3">2. Upgrading from oVirt 4.3 to 4.4</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<h1 id="upgrade-guide" class="discrete">Upgrade Guide</h1>
</div>
</div>
<h1 id="ovirt-upgrade-overview" class="sect0">oVirt Upgrade Overview</h1>
<div class="openblock partintro">
<div class="content">
<div id="Red_Hat_Virtualization_Upgrade_Overview" class="paragraph">
<p>This guide explains how to upgrade the following environments to oVirt 4.3 or 4.4 :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Standalone manager, local database</strong>: Both the Data Warehouse database and the Engine database are installed on the Engine.</p>
</li>
<li>
<p><strong>Standalone manager, remote database</strong>: Either the Data Warehouse database or the Engine database, or both, are on a separate machine.</p>
</li>
<li>
<p><strong>Self-hosted engine, local database</strong>: Both the Data Warehouse database and the Engine database are installed on the Engine.</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Plan any necessary downtime in advance. After you update the clusters' compatibility versions during the upgrade, a new hardware configuration is automatically applied to each virtual machine once it reboots. You must reboot any running or suspended VMs as soon as possible to apply the configuration changes.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Select the appropriate instructions for your environment from the following table. If your Engine and host versions differ (if you have previously upgraded the Engine but not the hosts), follow the instructions that match the Engine&#8217;s version.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Supported Upgrade Paths</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Current Engine version</th>
<th class="tableblock halign-left valign-top">Target Engine version</th>
<th class="tableblock halign-left valign-top">Relevant section</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.4</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Local database environment -</strong> <a href="#Upgrading_from_4-3">Upgrading from oVirt 4.3 to 4.4</a></p>
</div>
<div class="paragraph">
<p><strong>Remote database environment:</strong> <a href="#Remote_Upgrading_from_4-3">Upgrading a Remote Database Environment from oVirt 4.3 to 4.4</a></p>
</div>
<div class="paragraph">
<p><strong>Self-hosted engine, local database environment:</strong> <a href="#SHE_Upgrading_from_4-3">Upgrading a self-Hosted engine from oVirt 4.3 to 4.4</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.3</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Local database environment:</strong> <a href="#Upgrading_from_4-2">Upgrading from oVirt 4.2 to 4.3</a></p>
</div>
<div class="paragraph">
<p><strong>Remote database environment:</strong> <a href="#Remote_Upgrading_from_4-2">Upgrading a Remote Database Environment from oVirt 4.2 to 4.3</a></p>
</div>
<div class="paragraph">
<p><strong>Self-hosted engine, local database environment:</strong> <a href="#SHE_Upgrading_from_4-2">Upgrading a Self-Hosted Engine from oVirt 4.2 to 4.3</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<h1 id="upgrading-a-standalone-engine-local-database-environment" class="sect0">Upgrading a standalone Engine local database environment</h1>
<div class="sect1">
<h2 id="Upgrading_from_4-4">1. Upgrading from oVirt 4.4 to 4.5</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Upgrading your environment from 4.4 to 4.5 involves the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#Upgrade_Prerequisites_4-4_local_db">Make sure you meet the prerequisites, including enabling the correct repositories</a></p>
</li>
<li>
<p><a href="#Updating_the_Red_Hat_Virtualization_Manager_4-4_remote_db">Update the 4.4 Engine to the latest version of 4.4</a></p>
</li>
<li>
<p><a href="#Upgrading_the_Manager_to_4-5_4-4_local_db">Upgrade the Engine from 4.4 to 4.5</a></p>
</li>
<li>
<p><a href="#Upgrading_hosts_to_4-5_4-4_local_db">Migrate hosts and virtual machines while reducing virtual machine downtime</a></p>
</li>
<li>
<p><a href="#Upgrading_hypervisor_preserving_local_storage_4-4_local_db">(Optional) Upgrade oVirt Node while preserving local storage</a></p>
</li>
<li>
<p><a href="#Changing_the_Cluster_Compatibility_Version_4-4_local_db">Update the compatibility version of the clusters</a></p>
</li>
<li>
<p><a href="#Changing_Virtual_Machine_Cluster_Compatibility_4-4_local_db">Reboot any running or suspended virtual machines to update their configuration</a></p>
</li>
<li>
<p><a href="#Changing_the_Data_Center_Compatibility_Version_4-4_local_db">Update the compatibility version of the data centers</a></p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="Upgrade_Prerequisites_4-4_local_db">1.1. Prerequisites</h3>
<div class="ulist">
<ul>
<li>
<p>Plan for any necessary virtual machine downtime. After you update the clusters' compatibility versions during the upgrade, a new hardware configuration is automatically applied to each virtual machine once it reboots. You must reboot any running or suspended virtual machines as soon as possible to apply the configuration changes.</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensure your environment meets the requirements for oVirt 4.5.</p>
</li>
<li>
<p>When upgrading oVirt Engine, it is recommended that you use one of the existing hosts. If you decide to use a new host, you must assign a unique name to the new host and then add it to the existing cluster before you begin the upgrade procedure.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can now update the Engine to the latest version of 4.4.</p>
</div>
</div>
<div class="sect2">
<h3 id="Updating_the_Red_Hat_Virtualization_Manager_4-4_local_db">1.2. Updating the oVirt Engine</h3>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On the Engine machine, check if updated packages are available:</p>
<div class="listingblock">
<div class="content">
<pre># engine-upgrade-check</pre>
</div>
</div>
</li>
<li>
<p>Update the setup packages:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal"># dnf update ovirt\*setup\*</code></pre>
</div>
</div>
</li>
<li>
<p>Update the oVirt Engine with the <code>engine-setup</code> script. The <code>engine-setup</code> script prompts you with some configuration questions, then stops the <code>ovirt-engine</code> service, downloads and installs the updated packages, backs up and updates the database, performs post-installation configuration, and starts the <code>ovirt-engine</code> service.</p>
<div class="listingblock">
<div class="content">
<pre># engine-setup</pre>
</div>
</div>
<div class="paragraph">
<p>When the script completes successfully, the following message appears:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Execution of setup completed successfully</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>engine-setup</code> script is also used during the oVirt Engine installation process, and it stores the configuration values supplied. During an update, the stored values are displayed when previewing the configuration, and might not be up to date if <code>engine-config</code> was used to update configuration after installation. For example, if <code>engine-config</code> was used to update <code>SANWipeAfterDelete</code> to <code>true</code> after installation, <code>engine-setup</code> will output "Default SAN wipe after delete: False" in the configuration preview. However, the updated values will not be overwritten by <code>engine-setup</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The update process might take some time. Do not stop the process before it completes.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Update the base operating system and any optional packages installed on the Engine:</p>
<div class="listingblock">
<div class="content">
<pre># yum update --nobest</pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you encounter a required Ansible package conflict during the update, see <a href="https://access.redhat.com/solutions/5480561">Cannot perform yum update on my RHV manager (ansible conflict)</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If any kernel packages were updated, reboot the machine to complete the update.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can now upgrade the Engine to 4.5.</p>
</div>
</div>
<div class="sect2">
<h3 id="Upgrading_the_Manager_to_4-5_4-4_local_db">1.3. Upgrading the oVirt Engine from 4.4 to 4.5</h3>
<div class="paragraph">
<p>oVirt Engine 4.5 is only supported on Enterprise Linux 8.6 or later.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>All data centers and clusters in the environment must have the cluster compatibility level set to version 4.3 or higher.</p>
</li>
<li>
<p>All virtual machines in the environment must have the cluster compatibility level set to version 4.3 or higher.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Connected hosts and virtual machines can continue to work while the Engine is being upgraded.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you are going to install on RHEL or derivatives please follow <a href="/ovirt-site/previews/2940/download/install_on_rhel.html">Installing on RHEL or derivatives</a> first.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Enable oVirt 4.5 repositories</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal"># dnf install -y centos-release-ovirt45</code></pre>
</div>
</div>
</li>
<li>
<p>Enable version 2.3 of the <code>mod_auth_openidc</code> module.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal"># dnf module -y enable mod_auth_openidc:2.3</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Then follow the procedure for updates between minor releases.</p>
</div>
<div class="paragraph">
<p>You can now update the hosts.</p>
</div>
</div>
<div class="sect2">
<h3 id="Upgrading_hosts_to_4-5_4-4_local_db">1.4. Migrating hosts oVirt 4.4 to 4.5</h3>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Hosts for oVirt 4.5 require Enterprise Linux 8.6 or later.</p>
</li>
<li>
<p>oVirt Engine 4.5 is installed and running.</p>
</li>
<li>
<p>The compatibility level of the data center and cluster to which the hosts belong is set to 4.3 or higher.</p>
</li>
<li>
<p>All data centers and clusters in the environment must have the cluster compatibility level set to version 4.3 higher before you start the procedure.</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you are going to install on RHEL or derivatives please follow <a href="/ovirt-site/previews/2940/download/install_on_rhel.html">Installing on RHEL or derivatives</a> first.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure for Enterprise Linux hosts</div>
<ol class="arabic">
<li>
<p>Enable oVirt 4.5 repositories</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre># dnf install -y centos-release-ovirt45</pre>
</div>
</div>
<div class="olist arabic">
<div class="title">Procedure for Enterprise Linux hosts oVirt Nodes:</div>
<ol class="arabic">
<li>
<p>Enable oVirt 4.5 repositories</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre># dnf install centos-release-ovirt45 --enablerepo=extras</pre>
</div>
</div>
<div class="olist arabic">
<div class="title">Common procedure</div>
<ol class="arabic">
<li>
<p>Follow the procedure for updates between minor releases.</p>
</li>
<li>
<p>Follow the procedure for updating the cluster compatibility version.</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you are using GlusterFS Storage please note that oVirt 4.5 updates Gluster to version 10.
Please refer to <a href="https://docs.gluster.org/en/latest/Upgrade-Guide/upgrade-to-10/">Upgrade procedure to Gluster 10, from Gluster 9.x, 8.x and 7.x</a>
for more details.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can now update the cluster compatibility version.</p>
</div>
</div>
<div class="sect2">
<h3 id="Changing_the_Cluster_Compatibility_Version_4-4_local_db">1.5. Changing the Cluster Compatibility Version</h3>
<div class="paragraph">
<p>oVirt clusters have a compatibility version. The cluster compatibility version indicates the features of oVirt supported by all of the hosts in the cluster. The cluster compatibility is set according to the version of the least capable host operating system in the cluster.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>To change the cluster compatibility level, you must first update all the hosts in your cluster to a level that supports your desired compatibility level. Check if there is an icon next to the host indicating an update is available.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Limitations</div>
<ul>
<li>
<p>Virtio NICs are enumerated as a different device after upgrading the cluster compatibility level to 4.6. Therefore, the NICs might need to be reconfigured. oVirt recommends that you test the virtual machines before you upgrade the cluster by setting the cluster compatibility level to 4.6 on the virtual machine and verifying the network connection.</p>
<div class="paragraph">
<p>If the network connection for the virtual machine fails, configure the virtual machine with a custom emulated machine that matches the current emulated machine, for example pc-q35-rhel8.3.0 for 4.5 compatibility version, before upgrading the cluster.</p>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Administration Portal, click <span class="menuseq"><b class="menu">Compute</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Clusters</b></span>.</p>
</li>
<li>
<p>Select the cluster to change and click <b class="button">Edit</b>.</p>
</li>
<li>
<p>On the <strong>General</strong> tab, change the <strong>Compatibility Version</strong> to the desired value.</p>
</li>
<li>
<p>Click <b class="button">OK</b>. The <strong>Change Cluster Compatibility Version</strong> confirmation dialog opens.</p>
</li>
<li>
<p>Click <b class="button">OK</b> to confirm.</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>An error message might warn that some virtual machines and templates are incorrectly configured. To fix this error, edit each virtual machine manually. The <strong>Edit Virtual Machine</strong> window provides additional validations and warnings that show what to correct. Sometimes the issue is automatically corrected and the virtual machine&#8217;s configuration just needs to be saved again. After editing each virtual machine, you will be able to change the cluster compatibility version.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can now update the cluster compatibility version for virtual machines in the cluster.</p>
</div>
</div>
<div class="sect2">
<h3 id="Changing_Virtual_Machine_Cluster_Compatibility_4-4_local_db">1.6. Changing Virtual Machine Cluster Compatibility</h3>
<div class="paragraph">
<p>After updating a cluster&#8217;s compatibility version, you must update the cluster compatibility version of all running or suspended virtual machines by rebooting them from the Administration Portal, or using the REST API, instead of from within the guest operating system. Virtual machines that require a reboot are marked with the pending changes icon (<span class="image"><img src="common/images/pendingchanges.png" alt="pendingchanges" title="Pending Changes icon"></span>).</p>
</div>
<div class="paragraph">
<p>Although you can wait to reboot the virtual machines at a convenient time, rebooting immediately is highly recommended so that the virtual machines use the latest configuration. Any virtual machine that has not been rebooted runs with the previous configuration, and subsequent configuration changes made to the virtual machine might overwrite its pending cluster compatibility changes.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Administration Portal, click <span class="menuseq"><b class="menu">Compute</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Virtual Machines</b></span>.</p>
</li>
<li>
<p>Check which virtual machines require a reboot. In the <strong>Vms:</strong> search bar, enter the following query:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">next_run_config_exists=True</code></pre>
</div>
</div>
<div class="paragraph">
<p>The search results show all virtual machines with pending changes.</p>
</div>
</li>
<li>
<p>Select each virtual machine and click <strong>Restart</strong>. Alternatively, if necessary you can reboot a virtual machine from within the virtual machine itself.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When the virtual machine starts, the new compatibility version is automatically applied.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You cannot change the cluster compatibility version of a virtual machine snapshot that is in preview. You must first commit or undo the preview.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can now update the data center compatibility version.</p>
</div>
</div>
<div class="sect2">
<h3 id="Changing_the_Data_Center_Compatibility_Version_4-4_local_db">1.7. Changing the Data Center Compatibility Version</h3>
<div class="paragraph">
<p>oVirt data centers have a compatibility version. The compatibility version indicates the version of oVirt with which the data center is intended to be compatible. All clusters in the data center must support the desired compatibility level.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>To change the data center compatibility level, you must first update the compatibility version of all clusters and virtual machines in the data center.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Administration Portal, click <span class="menuseq"><b class="menu">Compute</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Data Centers</b></span>.</p>
</li>
<li>
<p>Select the data center to change and click <b class="button">Edit</b>.</p>
</li>
<li>
<p>Change the <strong>Compatibility Version</strong> to the desired value.</p>
</li>
<li>
<p>Click <b class="button">OK</b>. The <strong>Change Data Center Compatibility Version</strong> confirmation dialog opens.</p>
</li>
<li>
<p>Click <b class="button">OK</b> to confirm.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Upgrading_from_4-3">2. Upgrading from oVirt 4.3 to 4.4</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Upgrading your environment from 4.3 to 4.4 involves the following steps:</p>
</div>
</div>
</div>



        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/2940/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/2940/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/2940/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/2940/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2022 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=documentation&amp;title=Issue:%20/documentation/upgrade_guide/&amp;template=issue_template_documentation.md' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/master/source/documentation/upgrade_guide/index.adoc' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
