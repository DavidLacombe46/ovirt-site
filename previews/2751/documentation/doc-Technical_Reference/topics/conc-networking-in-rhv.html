<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>oVirt | oVirt is a free open-source virtualization solution for your entire enterprise</title>
<meta name="generator" content="Jekyll v3.9.1" />
<meta property="og:title" content="oVirt" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/2751/documentation/doc-Technical_Reference/topics/conc-networking-in-rhv.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/2751/documentation/doc-Technical_Reference/topics/conc-networking-in-rhv.html" />
<meta property="og:site_name" content="oVirt" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="oVirt" />
<meta name="twitter:site" content="@ovirt" />
<script type="application/ld+json">
{"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/2751/images/logo.svg"}},"description":"oVirt is a free open-source virtualization solution for your entire enterprise","@type":"WebPage","headline":"oVirt","url":"https://ovirt.github.io/ovirt-site/previews/2751/documentation/doc-Technical_Reference/topics/conc-networking-in-rhv.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/2751/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/2751/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/2751/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/2751/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/2751/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/2751/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2751/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2751/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2751/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2751/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2751/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <!-- Begin Jekyll Favicon tag v0.2.9 -->
<!-- Classic -->
<link rel="shortcut icon" href="/ovirt-site/previews/2751/favicon.ico">
<link rel="icon" sizes="48x48 32x32 16x16" href="/ovirt-site/previews/2751/favicon.ico">
  <link rel="icon" sizes="16x16" type="image/png" href="/ovirt-site/previews/2751/images/favicon-16x16.png">
  <link rel="icon" sizes="32x32" type="image/png" href="/ovirt-site/previews/2751/images/favicon-32x32.png">
  <link rel="icon" sizes="64x64" type="image/png" href="/ovirt-site/previews/2751/images/favicon-64x64.png">
  <link rel="icon" sizes="144x144" type="image/png" href="/ovirt-site/previews/2751/images/favicon-144x144.png">
<!-- Safari -->
  <link rel="apple-touch-icon" sizes="57x57" href="/ovirt-site/previews/2751/images/favicon-57x57.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/ovirt-site/previews/2751/images/favicon-76x76.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/ovirt-site/previews/2751/images/favicon-120x120.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/ovirt-site/previews/2751/images/favicon-152x152.png">
  <link rel="apple-touch-icon" sizes="167x167" href="/ovirt-site/previews/2751/images/favicon-167x167.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/ovirt-site/previews/2751/images/favicon-180x180.png">
<!-- Chrome -->
  <link rel="icon" sizes="192x192" href="/ovirt-site/previews/2751/images/favicon-192x192.png">
  <link rel="icon" sizes="96x96" href="/ovirt-site/previews/2751/images/favicon-96x96.png">
  <link rel="icon" sizes="48x48" href="/ovirt-site/previews/2751/images/favicon-48x48.png">
<link rel="manifest" href="/ovirt-site/previews/2751/manifest.webmanifest">
<!-- IE -->
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ovirt-site/previews/2751/images/favicon-144x144.png">
<meta name='msapplication-config' content="/ovirt-site/previews/2751/browserconfig.xml">
<!-- End Jekyll Favicon tag -->
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/2751/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/2751/images/logo.svg">      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/2751/download/'>Download</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/2751/documentation/'>Documentation</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2751/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2751/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2751//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2751//blogs.ovirt.org/'>Blog</a></li>              </ul>          </div>          <!-- /.navbar-collapse -->      </div>      <!-- /.container-fluid -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2751/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2751/documentation/">
              <span property="name">Documentation</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2751/documentation/doc-Technical_Reference/">
              <span property="name">Technical Reference</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2751/documentation/doc-Technical_Reference/topics/">
              <span property="name">Topics</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
        
        <section id="content" class="content container">
          
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This topic provides an overview of networking in {virt-product-fullname} ({virt-product-shortname}).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="host-networking">Host networking</h2>
<div class="sectionbody">
<div class="paragraph">
<p>On the data link layer (layer 2), {virt-product-shortname} enables the configuration of Linux bonds to connect to VLANs and define the MTU for network interfaces. These networks can be shared via Linux bridges to virtual machines.</p>
</div>
<div class="paragraph">
<p>For SR-IOV, the number of virtual functions and their mapping to logical networks can be configured.</p>
</div>
<div class="paragraph">
<p>VLANs are managed by FCoE and (application layer) iSCSI bonds, which are exclusively for storage access and neither visible for virtual machines nor in RHVs network configuration.</p>
</div>
<div class="paragraph">
<p>On the network layer (layer 3), IP addresses and gateways can be managed.</p>
</div>
<div class="paragraph">
<p>The DNS resolver used by the host can be configured.</p>
</div>
<div class="paragraph">
<p>It is also possible to manage network roles and QoS.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="virtual-machine-networking">Virtual machine networking</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="supported-networking-types">Supported networking types</h3>
<div class="paragraph">
<p>In {virt-product-shortname} virtual NICs of virtual machines can connect to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Linux bridges</p>
</li>
<li>
<p>SR-IOV NICs</p>
</li>
<li>
<p>OVN - {virt-product-shortname} internal OVN</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following diagram shows the structure of these three approaches, where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"Host 1" represents Linux bridges</p>
</li>
<li>
<p>"Host 2" represents SR-IOV NICs</p>
</li>
<li>
<p>"Host 3" represents OVN</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="103_RHV_Networking_Overview_0720.png" alt="103 RHV Networking Overview 0720">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Comparison of network types</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Linux bridge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SR-IOV</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">{virt-product-shortname} internal OVN</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Isolation from physical host networks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Layer 3, Separate IP network possible</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Layer 2, Separate VLANs possible</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Isolated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Live Migration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QoS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port Mirroring</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">configuration of plugged vNIC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MAC address management</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MTU propagation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VLAN filtering, might require configuration on the physical switch</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Technology Preview</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MAC Spoofing Protection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP Spoofing Protection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Predefined Network Filters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom Layer 3/4 Filtering</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NAT</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DHCP/Router Advertisements</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Layer 3 Router</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>**</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>*</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">virtual machine network data encapsulation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">flat, VLAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">flat, VLAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stable: GENEVE; Technology Preview: flat, VLAN</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="networking-choices-for-various-scenarios">Networking choices for various scenarios</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Linux bridge is the default way to go. It is the most proven option which fits most use cases.</p>
</div>
<div class="paragraph">
<p>For scenarios that require very low network latency or a high count of Ethernet frames, it might be worth investing in SR-IOV, which requires hardware support and additional configuration steps.</p>
</div>
<div class="paragraph">
<p>{virt-product-shortname} 's internal OVN networks enable virtual machines to communicate with each other without additional effort.</p>
</div>
<div class="paragraph">
<p>If a full-featured SDN is required, OpenStack Neutron can be used to manage OVN.</p>
</div>
<div class="paragraph">
<p>{virt-product-shortname} Engine provides only for a subset of the SDN features and user interfaces. To utilize the full potential of SDNs, like {virt-product-shortname} internal OVN, OpenStack Neutron OVN, or third party SDN, an additional client like CloudForms is required.</p>
</div>
<div class="paragraph">
<p>All kinds of networks can be combined on a single host and connected to the same virtual machine, with a single exception: {virt-product-shortname} 's internal OVN can not be used with Neutron in the same cluster.</p>
</div>
<div class="sect2">
<h3 id="interaction-with-the-guest">Interaction with the guest</h3>
<div class="paragraph">
<p>{virt-product-shortname} supports the initial configuration of the guest by providing configuration data via cloud-init. If the qemu-guest-agent runs inside the guest, {virt-product-shortname} can report the IP addresses of the guest.</p>
</div>
<div class="paragraph">
<p>If the guest virtual machine uses a VirtIO NIC, the MTU of the {virt-product-shortname} logical networks are provided to the guest OS. The guest can pick up the MTU from DHCPv4 or IPv6 router advertisements if supported by the logical network.</p>
</div>
</div>
<div class="sect2">
<h3 id="host-and-vm-networking">Host and VM networking</h3>
<div class="paragraph">
<p>Linux bridge networking separates virtual machine and host networking on OSI layer 3. This means that the networking configuration, like VLAN, bonding, and MTU, is shared between the host and virtual machines.</p>
</div>
<div class="paragraph">
<p>To reduce their surface, hosts should not assign IP addresses to VLANs connected to virtual machines. This helps the hosts avoid potential confusion caused by virtual machine traffic.</p>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://www.ovirt.org/documentation/networking-overview/#:~:text=deeper%20into%20details.-,Host%20Networking,via%20Linux%20bridges%20to%20VMs.&amp;text=On%20the%20network%20layer%20(layer,and%20gateways%20can%20be%20managed.">Overview of Networking in oVirt</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>



        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/2751/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/2751/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/2751/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/2751/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2022 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=documentation&amp;title=Issue:%20/documentation/doc-Technical_Reference/topics/conc-networking-in-rhv.html&amp;template=issue_template_documentation.md' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/master/source/documentation/doc-Technical_Reference/topics/conc-networking-in-rhv.adoc' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
