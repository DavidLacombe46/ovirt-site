<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>oVirt Metrics Store | oVirt</title>
<meta name="generator" content="Jekyll v3.9.1" />
<meta property="og:title" content="oVirt Metrics Store" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/2749/develop/release-management/features/metrics/metrics-store.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/2749/develop/release-management/features/metrics/metrics-store.html" />
<meta property="og:site_name" content="oVirt" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="oVirt Metrics Store" />
<meta name="twitter:site" content="@ovirt" />
<script type="application/ld+json">
{"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/2749/images/logo.svg"}},"description":"oVirt is a free open-source virtualization solution for your entire enterprise","@type":"WebPage","headline":"oVirt Metrics Store","url":"https://ovirt.github.io/ovirt-site/previews/2749/develop/release-management/features/metrics/metrics-store.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/2749/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/2749/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/2749/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/2749/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/2749/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/2749/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2749/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2749/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2749/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2749/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2749/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <!-- Begin Jekyll Favicon tag v0.2.9 -->
<!-- Classic -->
<link rel="shortcut icon" href="/ovirt-site/previews/2749/favicon.ico">
<link rel="icon" sizes="48x48 32x32 16x16" href="/ovirt-site/previews/2749/favicon.ico">
  <link rel="icon" sizes="16x16" type="image/png" href="/ovirt-site/previews/2749/images/favicon-16x16.png">
  <link rel="icon" sizes="32x32" type="image/png" href="/ovirt-site/previews/2749/images/favicon-32x32.png">
  <link rel="icon" sizes="64x64" type="image/png" href="/ovirt-site/previews/2749/images/favicon-64x64.png">
  <link rel="icon" sizes="144x144" type="image/png" href="/ovirt-site/previews/2749/images/favicon-144x144.png">
<!-- Safari -->
  <link rel="apple-touch-icon" sizes="57x57" href="/ovirt-site/previews/2749/images/favicon-57x57.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/ovirt-site/previews/2749/images/favicon-76x76.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/ovirt-site/previews/2749/images/favicon-120x120.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/ovirt-site/previews/2749/images/favicon-152x152.png">
  <link rel="apple-touch-icon" sizes="167x167" href="/ovirt-site/previews/2749/images/favicon-167x167.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/ovirt-site/previews/2749/images/favicon-180x180.png">
<!-- Chrome -->
  <link rel="icon" sizes="192x192" href="/ovirt-site/previews/2749/images/favicon-192x192.png">
  <link rel="icon" sizes="96x96" href="/ovirt-site/previews/2749/images/favicon-96x96.png">
  <link rel="icon" sizes="48x48" href="/ovirt-site/previews/2749/images/favicon-48x48.png">
<link rel="manifest" href="/ovirt-site/previews/2749/manifest.webmanifest">
<!-- IE -->
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ovirt-site/previews/2749/images/favicon-144x144.png">
<meta name='msapplication-config' content="/ovirt-site/previews/2749/browserconfig.xml">
<!-- End Jekyll Favicon tag -->
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/2749/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/2749/images/logo.svg">      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/2749/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2749/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/2749/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2749/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2749//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2749//blogs.ovirt.org/'>Blog</a></li>              </ul>          </div>          <!-- /.navbar-collapse -->      </div>      <!-- /.container-fluid -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2749/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2749/develop/">
              <span property="name">Developers Community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2749/develop/release-management/">
              <span property="name">Release Management</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2749/develop/release-management/features/">
              <span property="name">Features (Design documents)</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2749/develop/release-management/features/metrics/">
              <span property="name">Metrics</span>
              <meta property="position" content="5" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <header class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/7994226372822da5ac75322d097186c9?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/7994226372822da5ac75322d097186c9?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy">
                  </div>
                  <span class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Shirly Radco</span></p>
                      
                    </section>
                  </span>
                
              </header>
            </header>
          
        
        <section id="content" class="content container">
          <div class='alert alert-warning'>Feature pages are design documents that developers have created while collaborating on oVirt.<br><br>Most of them are&nbsp;<strong>outdated</strong>, but provide historical design context.<br><br>They are&nbsp;<strong>not</strong>&nbsp;user documentation and should not be treated as such.<br><br><a href='/ovirt-site/previews/2749/documentation/'>Documentation is available here.</a></div>

<div class="alert alert-warning">
  <p><strong>ATTENTION: This page is no longer up to date. Please follow the link for the updated documentation:</strong>
  <br /></p>
  <ul>
    <li><a href="/ovirt-site/previews/2749/documentation/administration_guide/#monitoring_and_observability">Monitoring and observability</a></li>
  </ul>
</div>

<h1 id="ovirt-metrics-store">oVirt Metrics Store</h1>

<h2 id="summary">Summary</h2>

<p>This feature will introduce real-time monitoring for the oVirt project.</p>

<p>Real-time monitoring will provide visibility into the user’s complete infrastructure.</p>

<p>The oVirt Metrics Store is based on the <a href="https://github.com/openshift/origin-aggregated-logging">OpenShift Logging</a> stack.
It consists of multiple components abbreviated as the “EFK” stack: Elasticsearch, Rsyslog, Kibana.
You can use either the OpenShift Container Platform (OCP) based on RHEL7, or OpenShift Origin (Origin) based on CentOS7.
<a href="https://github.com/openshift/openshift-ansible">Ansible</a> is used to install logging using the OpenShift Ansible logging <a href="https://github.com/openshift/openshift-ansible/blob/release-3.11/roles/openshift_logging/README.md">roles</a>.</p>

<p>On the oVirt hosts, Collectd is used to send metrics about the host, engine and vms to a local Rsyslog.
Rsyslog is used to collect Engine, VDSM logs and the Collectd metrics, parse the data and add additional metadata and send the data to the remote metrics store.</p>

<p>Collectd and Rsyslog configurations are deployed using Ansible, that are also run as part of host deploy for every new/reilnstalled host.</p>

<h2 id="owner">Owner</h2>

<ul>
  <li>Name: Shirly Radco (sradco)</li>
  <li>Email: <a href="mailto:sradco@redhat.com">sradco@redhat.com</a></li>
</ul>

<h2 id="current-status">Current Status</h2>

<ul>
  <li>Target Release: 4.2</li>
  <li>Status: Released</li>
  <li>Last updated: Tue 26 Jun 2018</li>
</ul>

<h2 id="description">Description</h2>

<p>Collectd and Fluentd are installed on the hosts and engine machines, since 4.2.
In 4.3 Fluentd was replaced by Rsyslog for better performance.
When upgrading from 4.2.z to 4.3 the Fluentd packages are still installed on the machine, but the servive is stopped and disabled.
We have an Ansible script that configures the service on all relevant hosts.</p>

<p>There are 3 pre-defined dashboards that can be imported into Kibana as part of the installation proicess.</p>

<p>We plan to continue adding additional logs and metrics as required, add pre-defined dashboards and alerting,
that will detect and notify the user when something goes wrong in the environment, based on SLA events, thresholds, etc.</p>

<h2 id="installation-guide">Installation Guide</h2>

<p>Follow the installation guide at:  <a href="/ovirt-site/previews/2749/develop/release-management/features/metrics/metrics-store-installation.html">Metrics Store - Installation Guide</a></p>

<h2 id="collected-data">Collected Data</h2>

<p>Follow the list of collected metrics and logs at:  <a href="/ovirt-site/previews/2749/develop/release-management/features/metrics/metrics-store-collected-metrics.html">Metrics Store - Collected Data</a></p>

<h2 id="metrics-schema">Metrics Schema</h2>

<p>Follow the metrics schema, when creating your reports, at: <a href="/ovirt-site/previews/2749/develop/release-management/features/metrics/metrics-store-schema.html">Metrics Store - Schema</a></p>



        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/2749/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/2749/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/2749/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/2749/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2022 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/release-management/features/metrics/metrics-store.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/master/source/develop/release-management/features/metrics/metrics-store.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
