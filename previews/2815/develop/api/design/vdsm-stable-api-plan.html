<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>VDSM Stable API Plan | oVirt</title>
<meta name="generator" content="Jekyll v3.9.1" />
<meta property="og:title" content="VDSM Stable API Plan" />
<meta name="author" content="Dan Kenigsberg" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/2815/develop/api/design/vdsm-stable-api-plan.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/2815/develop/api/design/vdsm-stable-api-plan.html" />
<meta property="og:site_name" content="oVirt" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="VDSM Stable API Plan" />
<meta name="twitter:site" content="@ovirt" />
<meta name="twitter:creator" content="@Dan Kenigsberg" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Dan Kenigsberg"},"description":"oVirt is a free open-source virtualization solution for your entire enterprise","@type":"WebPage","headline":"VDSM Stable API Plan","url":"https://ovirt.github.io/ovirt-site/previews/2815/develop/api/design/vdsm-stable-api-plan.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/2815/images/logo.svg"},"name":"Dan Kenigsberg"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/2815/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/2815/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/2815/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/2815/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/2815/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/2815/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2815/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2815/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2815/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2815/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2815/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <!-- Begin Jekyll Favicon tag v0.2.9 -->
<!-- Classic -->
<link rel="shortcut icon" href="/ovirt-site/previews/2815/favicon.ico">
<link rel="icon" sizes="48x48 32x32 16x16" href="/ovirt-site/previews/2815/favicon.ico">
  <link rel="icon" sizes="16x16" type="image/png" href="/ovirt-site/previews/2815/images/favicon-16x16.png">
  <link rel="icon" sizes="32x32" type="image/png" href="/ovirt-site/previews/2815/images/favicon-32x32.png">
  <link rel="icon" sizes="64x64" type="image/png" href="/ovirt-site/previews/2815/images/favicon-64x64.png">
  <link rel="icon" sizes="144x144" type="image/png" href="/ovirt-site/previews/2815/images/favicon-144x144.png">
<!-- Safari -->
  <link rel="apple-touch-icon" sizes="57x57" href="/ovirt-site/previews/2815/images/favicon-57x57.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/ovirt-site/previews/2815/images/favicon-76x76.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/ovirt-site/previews/2815/images/favicon-120x120.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/ovirt-site/previews/2815/images/favicon-152x152.png">
  <link rel="apple-touch-icon" sizes="167x167" href="/ovirt-site/previews/2815/images/favicon-167x167.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/ovirt-site/previews/2815/images/favicon-180x180.png">
<!-- Chrome -->
  <link rel="icon" sizes="192x192" href="/ovirt-site/previews/2815/images/favicon-192x192.png">
  <link rel="icon" sizes="96x96" href="/ovirt-site/previews/2815/images/favicon-96x96.png">
  <link rel="icon" sizes="48x48" href="/ovirt-site/previews/2815/images/favicon-48x48.png">
<link rel="manifest" href="/ovirt-site/previews/2815/manifest.webmanifest">
<!-- IE -->
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ovirt-site/previews/2815/images/favicon-144x144.png">
<meta name='msapplication-config' content="/ovirt-site/previews/2815/browserconfig.xml">
<!-- End Jekyll Favicon tag -->
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/2815/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/2815/images/logo.svg">      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/2815/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2815/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/2815/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2815/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2815//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2815//blogs.ovirt.org/'>Blog</a></li>              </ul>          </div>          <!-- /.navbar-collapse -->      </div>      <!-- /.container-fluid -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2815/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2815/develop/">
              <span property="name">Developers Community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2815/develop/api/">
              <span property="name">Api</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2815/develop/api/design/">
              <span property="name">Design</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <header class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/ce421080e5d2da87febb626f6e8906c9?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/ce421080e5d2da87febb626f6e8906c9?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy">
                  </div>
                  <span class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Dan Kenigsberg</span></p>
                      
                    </section>
                  </span>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/cc45d43aef767f251af073453c81fc10?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/cc45d43aef767f251af073453c81fc10?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy">
                  </div>
                  <span class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Itamar Heim</span></p>
                      
                    </section>
                  </span>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/fdf1234a96717595a057d4edb7258da2?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/fdf1234a96717595a057d4edb7258da2?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy">
                  </div>
                  <span class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Saggi Mizrahi</span></p>
                      
                    </section>
                  </span>
                
              </header>
            </header>
          
        
        <section id="content" class="content container">
          <div class='alert alert-warning'>This developer documentation is <strong>outdated</strong>, but provides historical context.<br><br>It is <strong>not</strong> user documentation and should not be treated as such.<br><br><a href='/ovirt-site/previews/2815/documentation/'>Documentation is available here.</a></div>

<!-- TODO: Content review -->

<h1 id="vdsm-stable-api-plan">VDSM Stable API Plan</h1>

<h2 id="api-schema">API Schema</h2>

<ul>
  <li>Decide on a formal format (are there any existing schema representation formats?)</li>
</ul>

<p>Things to declare</p>

<ul>
  <li>Object names</li>
  <li>Async vs Sync Call</li>
  <li>Parameter hard types (incl. int types and string lengths)</li>
  <li>Valid options for enums (maybe use introspection? Will be better for compatibility?)</li>
  <li>Response</li>
  <li>Object and struct details (Hard Types)</li>
  <li>Events</li>
</ul>

<h2 id="vdsm-supportability-guidelines">VDSM Supportability Guidelines</h2>

<h3 id="versioning">Versioning</h3>

<ul>
  <li>The API will be grouped by capabilities and each will be individually versioned. This has to be done to accommodate optional features.</li>
  <li>The API is version as a whole, deprecation means a version bump where the deprecated methods are “forbidden” from use. For example if doSomething() became deprecated in version 2.1.X any application checking against version 2.1.X shouldn’t use the verb.</li>
  <li>The versioning scheme in the form of LATEST_API.OLDEST_API.BUGFIX. A client checking to see if the host is compatible needs to see if the API version it was made to work with is between and including MAJOR and MINOR. There will be a verb when you can put your version and it will say if it’s supported for convenience.</li>
  <li>Experimental verbs are unversioned and can appear or disappear at any time without notice.</li>
  <li>
    <p>VDSM Can export support for multiple supported API versions.</p>

    <p>{“Image Manipulator”: “1.0.0”,
    “Networking”: “2.1.2”,
    “Storage Connection Management”: “3.0.4”,
    “GlusterFS Support”: “1.0.12”]}</p>
  </li>
  <li>Release with an API change is a new API version.</li>
  <li>Versioning features separately means that clients that don’t use certain parts of VDSM will not have to care if the bits they are not using change.</li>
</ul>

<h3 id="documentation">Documentation</h3>

<ul>
  <li>All API calls must be documented.</li>
  <li>TBD. In code? In Schema?</li>
</ul>

<h3 id="api-change">API Change</h3>

<ul>
  <li>For API changes we will use the +1/-1 system.</li>
  <li>For every API change there needs to be acks of at least 2 core developers. One of them has to be specialized at the subsystem in question.</li>
  <li>Anyone can nack an API change.</li>
  <li>Complex types should be easily extendable</li>
</ul>

<h3 id="experimental-verbs">Experimental Verbs</h3>

<ul>
  <li>All new APIs start their lives as experimental</li>
  <li>Experimental verbs are mangled in a way where it’s obvious to the user the call is experimental and WILL be changed.</li>
  <li>When cementing an experimental call the same patch has to bump the version accordingly.</li>
  <li>It’s preferable to cement related calls as a group to prevent frequent API version changes.</li>
</ul>

<h3 id="deprecation">Deprecation</h3>

<ul>
  <li>Deprecation should be done sparsely</li>
  <li>Once marked deprecated, the API will remain available for at least 1 major release.</li>
</ul>




        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/2815/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/2815/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/2815/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/2815/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2022 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/api/design/vdsm-stable-api-plan.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/master/source/develop/api/design/vdsm-stable-api-plan.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
