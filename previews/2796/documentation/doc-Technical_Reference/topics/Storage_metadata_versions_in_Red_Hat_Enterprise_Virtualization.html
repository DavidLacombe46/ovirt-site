<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Storage Metadata Versions in {virt-product-fullname} | oVirt</title>
<meta name="generator" content="Jekyll v3.9.1" />
<meta property="og:title" content="Storage Metadata Versions in {virt-product-fullname}" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/2796/documentation/doc-Technical_Reference/topics/Storage_metadata_versions_in_Red_Hat_Enterprise_Virtualization.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/2796/documentation/doc-Technical_Reference/topics/Storage_metadata_versions_in_Red_Hat_Enterprise_Virtualization.html" />
<meta property="og:site_name" content="oVirt" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Storage Metadata Versions in {virt-product-fullname}" />
<meta name="twitter:site" content="@ovirt" />
<script type="application/ld+json">
{"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/2796/images/logo.svg"}},"description":"oVirt is a free open-source virtualization solution for your entire enterprise","@type":"WebPage","headline":"Storage Metadata Versions in {virt-product-fullname}","url":"https://ovirt.github.io/ovirt-site/previews/2796/documentation/doc-Technical_Reference/topics/Storage_metadata_versions_in_Red_Hat_Enterprise_Virtualization.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/2796/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/2796/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/2796/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/2796/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/2796/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/2796/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2796/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2796/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2796/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2796/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2796/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <!-- Begin Jekyll Favicon tag v0.2.9 -->
<!-- Classic -->
<link rel="shortcut icon" href="/ovirt-site/previews/2796/favicon.ico">
<link rel="icon" sizes="48x48 32x32 16x16" href="/ovirt-site/previews/2796/favicon.ico">
  <link rel="icon" sizes="16x16" type="image/png" href="/ovirt-site/previews/2796/images/favicon-16x16.png">
  <link rel="icon" sizes="32x32" type="image/png" href="/ovirt-site/previews/2796/images/favicon-32x32.png">
  <link rel="icon" sizes="64x64" type="image/png" href="/ovirt-site/previews/2796/images/favicon-64x64.png">
  <link rel="icon" sizes="144x144" type="image/png" href="/ovirt-site/previews/2796/images/favicon-144x144.png">
<!-- Safari -->
  <link rel="apple-touch-icon" sizes="57x57" href="/ovirt-site/previews/2796/images/favicon-57x57.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/ovirt-site/previews/2796/images/favicon-76x76.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/ovirt-site/previews/2796/images/favicon-120x120.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/ovirt-site/previews/2796/images/favicon-152x152.png">
  <link rel="apple-touch-icon" sizes="167x167" href="/ovirt-site/previews/2796/images/favicon-167x167.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/ovirt-site/previews/2796/images/favicon-180x180.png">
<!-- Chrome -->
  <link rel="icon" sizes="192x192" href="/ovirt-site/previews/2796/images/favicon-192x192.png">
  <link rel="icon" sizes="96x96" href="/ovirt-site/previews/2796/images/favicon-96x96.png">
  <link rel="icon" sizes="48x48" href="/ovirt-site/previews/2796/images/favicon-48x48.png">
<link rel="manifest" href="/ovirt-site/previews/2796/manifest.webmanifest">
<!-- IE -->
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ovirt-site/previews/2796/images/favicon-144x144.png">
<meta name='msapplication-config' content="/ovirt-site/previews/2796/browserconfig.xml">
<!-- End Jekyll Favicon tag -->
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/2796/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/2796/images/logo.svg">      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/2796/download/'>Download</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/2796/documentation/'>Documentation</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2796/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2796/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2796//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2796//blogs.ovirt.org/'>Blog</a></li>              </ul>          </div>          <!-- /.navbar-collapse -->      </div>      <!-- /.container-fluid -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2796/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2796/documentation/">
              <span property="name">Documentation</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2796/documentation/doc-Technical_Reference/">
              <span property="name">Technical Reference</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2796/documentation/doc-Technical_Reference/topics/">
              <span property="name">Topics</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
        
        <section id="content" class="content container">
          
<div class="paragraph">
<p>{virt-product-fullname} stores information about storage domains as metadata on the storage domains themselves. Each major release of {virt-product-fullname} has seen improved implementations of storage metadata.</p>
</div>
<div class="ulist">
<div class="title">V1 metadata ({virt-product-fullname} 2.x series)</div>
<ul>
<li>
<p>Each storage domain contains metadata describing its own structure, and all of the names of physical volumes that are used to back virtual disks.</p>
</li>
<li>
<p>Master domains additionally contain metadata for all the domains and physical volume names in the storage pool. The total size of this metadata is limited to 2 KB, limiting the number of storage domains that can be in a pool.</p>
</li>
<li>
<p>Template and virtual machine base images are read only.</p>
</li>
<li>
<p>V1 metadata is applicable to NFS, iSCSI, and FC storage domains.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">V2 metadata (Red Hat Enterprise Virtualization 3.0)</div>
<ul>
<li>
<p>All storage domain and pool metadata is stored as logical volume tags rather than written to a logical volume. Metadata about virtual disk volumes is still stored in a logical volume on the domains.</p>
</li>
<li>
<p>Physical volume names are no longer included in the metadata.</p>
</li>
<li>
<p>Template and virtual machine base images are read only.</p>
</li>
<li>
<p>V2 metadata is applicable to iSCSI, and FC storage domains.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">V3 metadata (Red Hat Enterprise Virtualization 3.1 and later)</div>
<ul>
<li>
<p>All storage domain and pool metadata is stored as logical volume tags rather than written to a logical volume. Metadata about virtual disk volumes is still stored in a logical volume on the domains.</p>
</li>
<li>
<p>Virtual machine and template base images are no longer read only. This change enables live snapshots, live storage migration, and clone from snapshot.</p>
</li>
<li>
<p>Support for unicode metadata is added, for non-English volume names.</p>
</li>
<li>
<p>V3 metadata is applicable to NFS, GlusterFS, POSIX, iSCSI, and FC storage domains.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">V4 metadata (Red Hat Virtualization 4.1 and later)</div>
<ul>
<li>
<p>Support for QCOW2 compat levels - the QCOW image format includes a version number to allow introducing new features that change the image format so that it is incompatible with earlier versions. Newer QEMU versions (1.7 and above) support QCOW2 version 3, which is not backwards compatible, but introduces improvements such as zero clusters and improved performance.</p>
</li>
<li>
<p>A new xleases volume to support VM leases - this feature adds the ability to acquire a lease per virtual machine on shared storage without attaching the lease to a virtual machine disk.</p>
<div class="paragraph">
<p>A VM lease offers two important capabilities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Avoiding split-brain.</p>
</li>
<li>
<p>Starting a VM on another host if the original host becomes non-responsive, which improves the availability of HA VMs.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">V5 metadata (Red Hat Virtualization 4.3 and later)</div>
<ul>
<li>
<p>Support for 4K (4096 byte) block storage.</p>
</li>
<li>
<p>Support for variable SANLOCK allignments.</p>
</li>
<li>
<p>Support for new properties:</p>
<div class="ulist">
<ul>
<li>
<p><code>BLOCK_SIZE</code> - stores the block size of the storage domain in bytes.</p>
</li>
<li>
<p><code>ALIGNMENT</code> -  determines the formatting and size of the xlease volume. (1MB to 8MB).
Determined by the maximum number of host to be supported (value provided by the
user) and disk block size.</p>
<div class="paragraph">
<p>For example: a 512b block size and support for 2000 hosts
results in a 1MB xlease volume.</p>
</div>
<div class="paragraph">
<p>A 4K block size with 2000 hosts
results in a 8MB xlease volume.</p>
</div>
<div class="paragraph">
<p>The default value of maximum hosts is 250, resulting in  an xlease volume of 1MB for 4K disks.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Deprecated properties:</p>
<div class="ulist">
<ul>
<li>
<p>The <code>LOGBLKSIZE</code>, <code>PHYBLKSIZE</code>, <code>MTIME</code>, and <code>POOL_UUID</code> fields were removed from the storage domain metadata.</p>
</li>
<li>
<p>The <code>SIZE</code> (size in blocks) field was replaced by <code>CAP</code> (size in bytes).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>You cannot boot from a 4K format disk, as the boot disk always uses a 512 byte emulation.</p>
</li>
<li>
<p>The nfs format always uses 512 bytes.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>



        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/2796/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/2796/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/2796/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/2796/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2022 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=documentation&amp;title=Issue:%20/documentation/doc-Technical_Reference/topics/Storage_metadata_versions_in_Red_Hat_Enterprise_Virtualization.html&amp;template=issue_template_documentation.md' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/master/source/documentation/doc-Technical_Reference/topics/Storage_metadata_versions_in_Red_Hat_Enterprise_Virtualization.adoc' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
