<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Python Examples | oVirt</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Python Examples" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/2828/documentation/doc-Python_SDK_Guide/chap-Python_Examples.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/2828/documentation/doc-Python_SDK_Guide/chap-Python_Examples.html" />
<meta property="og:site_name" content="oVirt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Python Examples" />
<meta name="twitter:site" content="@ovirt" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"oVirt is a free open-source virtualization solution for your entire enterprise","headline":"Python Examples","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/2828/images/logo.svg"}},"url":"https://ovirt.github.io/ovirt-site/previews/2828/documentation/doc-Python_SDK_Guide/chap-Python_Examples.html"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/2828/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/2828/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/2828/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/2828/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/2828/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/2828/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2828/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2828/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2828/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2828/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2828/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <link href='/ovirt-site/previews/2828/favicon.ico' rel='shortcut icon' sizes='36x36 24x24 16x16' type='image/x-icon'/>
<link href='/ovirt-site/previews/2828/favicon.png' rel='icon' sizes='196x196' type='image/png'/>
<meta content='/ovirt-site/previews/2828/mstile-icon-128x128.png' name='msapplication-TileImage'/>
<meta content='transparent' name='msapplication-TileColor'/>
<link href='/ovirt-site/previews/2828/manifest.webmanifest' rel='manifest'/>
<meta content='/ovirt-site/previews/2828/browserconfig.xml' name='msapplication-config'/>
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/2828/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/2828/images/logo.svg">      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/2828/download/'>Download</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/2828/documentation/'>Documentation</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2828/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2828/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2828//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2828//blogs.ovirt.org/'>Blog</a></li>              </ul>          </div>          <!-- /.navbar-collapse -->      </div>      <!-- /.container-fluid -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2828/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2828/documentation/">
              <span property="name">Documentation</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2828/documentation/doc-Python_SDK_Guide/">
              <span property="name">Python SDK Guide</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
        
        <section id="content" class="content container">
          
<div class="sect1">
<h2 id="Examples_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section provides examples demonstrating the steps to create a virtual machine within a basic {virt-product-fullname} environment, using the Python SDK.</p>
</div>
<div class="paragraph">
<p>These examples use the <code>ovirtsdk</code> Python library provided by the <code>ovirt-engine-sdk-python</code> package. This package is available to systems attached to a <code>{virt-product-fullname}</code> subscription pool in Red Hat Subscription Manager. See <a href="#Installing_the_Software_Development_Kit">Installing the Software Development Kit</a> for more information on subscribing your system(s) to download the software.</p>
</div>
<div class="paragraph">
<p>You will also need:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A networked installation of {virt-product-fullname} {engine-name}.</p>
</li>
<li>
<p>A networked and configured {hypervisor-fullname}.</p>
</li>
<li>
<p>An ISO image file containing an operating system for installation on a virtual machine.</p>
</li>
<li>
<p>A working understanding of both the logical and physical objects that make up a {virt-product-fullname} environment.</p>
</li>
<li>
<p>A working understanding of the Python programming language.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The examples include placeholders for authentication details (<code>admin@internal</code> for user name, and <code>password</code> for password). Replace the placeholders with the authentication requirements of your environment.</p>
</div>
<div class="paragraph">
<p>{virt-product-fullname} {engine-name} generates a globally unique identifier (GUID) for the <code>id</code> attribute for each resource. Identifier codes in these examples differ from the identifier codes in your {virt-product-fullname} environment.</p>
</div>
<div class="paragraph">
<p>The examples contain only basic exception and error handling logic. For more information on the exception handling specific to the SDK, see the pydoc for the <code>ovirtsdk.infrastructure.errors</code> module:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">$ pydoc ovirtsdk.infrastructure.errors</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Connecting_to_the_Red_Hat_Virtualization_Manager">Connecting to the {virt-product-fullname} {engine-name} in Version 4</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To connect to the {virt-product-fullname} {engine-name}, you must create an instance of the <strong>Connection</strong> class from the <code>ovirtsdk4.sdk</code> module by importing the class at the start of the script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk</code></pre>
</div>
</div>
<div class="paragraph">
<p>The constructor of the <strong>Connection</strong> class takes a number of arguments. Supported arguments are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>url</code></dt>
<dd>
<p>A string containing the base URL of the {engine-name}, such as <code>https://server.example.com/ovirt-engine/api</code>.</p>
</dd>
<dt class="hdlist1"><code>username</code></dt>
<dd>
<p>Specifies the user name to connect, such as <code>admin@internal</code>. This parameter is mandatory.</p>
</dd>
<dt class="hdlist1"><code>password</code></dt>
<dd>
<p>Specifies the password for the user name provided by the <code>username</code> parameter. This parameter is mandatory.</p>
</dd>
<dt class="hdlist1"><code>token</code></dt>
<dd>
<p>An optional token to access the API, instead of a user name and password. If the <code>token</code> parameter is not specified, the SDK will create one  automatically.</p>
</dd>
<dt class="hdlist1"><code>insecure</code></dt>
<dd>
<p>A Boolean flag that indicates whether the server&#8217;s TLS certificate and host name should be checked.</p>
</dd>
<dt class="hdlist1"><code>ca_file</code></dt>
<dd>
<p>A PEM file containing the trusted CA certificates. The certificate presented by the server will be verified using these CA certificates. If <code>ca_file</code> parameter is not set, the system-wide CA certificate store is used.</p>
</dd>
<dt class="hdlist1"><code>debug</code></dt>
<dd>
<p>A Boolean flag indicating whether debug output should be generated. If the value is <code>True</code> and the <code>log</code> parameter is not <code>None</code>, the data sent to and received from the server will be written to the log.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>User names and passwords are written to the debug log, so handle it with care.</p>
</div>
<div class="paragraph">
<p>Compression is disabled in debug mode, which means that debug messages are sent as plain text.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1"><code>log</code></dt>
<dd>
<p>The logger where the log messages will be written.</p>
</dd>
<dt class="hdlist1"><code>kerberos</code></dt>
<dd>
<p>A Boolean flag indicating whether Kerberos authentication should be used instead of the default basic authentication.</p>
</dd>
<dt class="hdlist1"><code>timeout</code></dt>
<dd>
<p>The maximum total time to wait for the response, in seconds. A value of <code>0</code> (default) means to wait forever. If the timeout expires before the response is received, an exception is raised.</p>
</dd>
<dt class="hdlist1"><code>compress</code></dt>
<dd>
<p>A Boolean flag indicating whether the SDK should ask the server to send compressed responses. The default is <code>True</code>. This is a hint for the server, which may return uncompressed data even when this parameter is set to <code>True</code>. Compression is disabled in debug mode, which means that debug messages are sent as plain text.</p>
</dd>
<dt class="hdlist1"><code>sso_url</code></dt>
<dd>
<p>A string containing the base SSO URL of the server. The default SSO URL is computed from the <code>url</code> if no <code>sso_url</code> is provided.</p>
</dd>
<dt class="hdlist1"><code>sso_revoke_url</code></dt>
<dd>
<p>A string containing the base URL of the SSO revoke service. This needs to be specified only when using an external authentication service. By default, this URL is automatically calculated from the value of the <code>url</code> parameter, so that SSO token revoke will be performed using the SSO service, which is part of the {engine-name}.</p>
</dd>
<dt class="hdlist1"><code>sso_token_name</code></dt>
<dd>
<p>The token name in the JSON SSO response returned from the SSO server. Default value is <code>access_token</code>.</p>
</dd>
<dt class="hdlist1"><code>headers</code></dt>
<dd>
<p>A dictionary with headers, which should be sent with every request.</p>
</dd>
<dt class="hdlist1"><code>connections</code></dt>
<dd>
<p>The maximum number of connections to open to the host. If the value is <code>0</code> (default), the number of connections is unlimited.</p>
</dd>
<dt class="hdlist1"><code>pipeline</code></dt>
<dd>
<p>The maximum number of requests to put in an HTTP pipeline without waiting for the response. If the value is <code>0</code> (default), pipelining is disabled.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk

<span style="color:#777"># Create a connection to the server:</span>
connection = sdk.Connection(
    url=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://engine.example.com/ovirt-engine/api</span><span style="color:#710">'</span></span>,
    username=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">admin@internal</span><span style="color:#710">'</span></span>,
    password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
    ca_file=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ca.pem</span><span style="color:#710">'</span></span>,
)

connection.test()

print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Connected successfully!</span><span style="color:#710">&quot;</span></span>)

connection.close()</code></pre>
</div>
</div>
<div class="paragraph">
<p>For a full list of supported methods, you can generate the documentation for the <code>ovirtsdk.api</code> module on the {engine-name} machine:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">$ pydoc ovirtsdk.api</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Listing_Data_Centers">Listing Data Centers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>datacenters</code> collection contains all the data centers in the environment.</p>
</div>
<div class="exampleblock">
<div class="title">Example 1. Listing data centers</div>
<div class="content">
<div class="paragraph">
<p>This example lists the data centers in the <code>datacenters</code> collection and output some basic information about each data center in the collection.</p>
</div>
<div class="paragraph">
<p><strong>V4</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4.types</span> <span style="color:#080;font-weight:bold">as</span> types

connection = sdk.Connection(
    url=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://engine.example.com/ovirt-engine/api</span><span style="color:#710">'</span></span>,
    username=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">admin@internal</span><span style="color:#710">'</span></span>,
    password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
    ca_file=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ca.pem</span><span style="color:#710">'</span></span>,
)

dcs_service = connection.system_service().dcs_service()

dcs = dcs_service.list()

<span style="color:#080;font-weight:bold">for</span> dc <span style="color:#080;font-weight:bold">in</span> dcs:
    print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">%s (%s)</span><span style="color:#710">&quot;</span></span> % (dc.name, dc.id))

connection.close()</code></pre>
</div>
</div>
<div class="paragraph">
<p>In an environment where only the <code>Default</code> data center exists, and it is not activated, the examples output the text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">Default (00000000-0000-0000-0000-000000000000)</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Listing_Clusters">Listing Clusters</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>clusters</code> collection contains all clusters in the environment.</p>
</div>
<div class="exampleblock">
<div class="title">Example 2. Listing clusters</div>
<div class="content">
<div class="paragraph">
<p>This example lists the clusters in the <code>clusters</code> collection and output some basic information about each cluster in the collection.</p>
</div>
<div class="paragraph">
<p><strong>V4</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4.types</span> <span style="color:#080;font-weight:bold">as</span> types

connection = sdk.Connection(
    url=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://engine.example.com/ovirt-engine/api</span><span style="color:#710">'</span></span>,
    username=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">admin@internal</span><span style="color:#710">'</span></span>,
    password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
    ca_file=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ca.pem</span><span style="color:#710">'</span></span>,
)

cls_service = connection.system_service().clusters_service()

cls = cls_service.list()

<span style="color:#080;font-weight:bold">for</span> cl <span style="color:#080;font-weight:bold">in</span> cls:
    print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">%s (%s)</span><span style="color:#710">&quot;</span></span> % (cl.name, cl.id))

connection.close()</code></pre>
</div>
</div>
<div class="paragraph">
<p>In an environment where only the <code>Default</code> cluster exists, the examples output the text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">Default (00000000-0000-0000-0000-000000000000)</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Listing_Hosts">Listing Hosts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>hosts</code> collection contains all hosts in the environment.</p>
</div>
<div class="exampleblock">
<div class="title">Example 3. Listing hosts</div>
<div class="content">
<div class="paragraph">
<p>This example lists the hosts in the <code>hosts</code> collection and their IDs.</p>
</div>
<div class="paragraph">
<p><strong>V4</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4.types</span> <span style="color:#080;font-weight:bold">as</span> types

connection = sdk.Connection(
    url=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://engine.example.com/ovirt-engine/api</span><span style="color:#710">'</span></span>,
    username=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">admin@internal</span><span style="color:#710">'</span></span>,
    password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
    ca_file=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ca.pem</span><span style="color:#710">'</span></span>,
)

host_service = connection.system_service().hosts_service()

hosts = host_service.list()

<span style="color:#080;font-weight:bold">for</span> host <span style="color:#080;font-weight:bold">in</span> hosts:
    print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">%s (%s)</span><span style="color:#710">&quot;</span></span> % (host.name, host.id))

connection.close()</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In an environment where only one host, <code>MyHost</code>, has been attached, the examples output the text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">MyHost (00000000-0000-0000-0000-000000000000)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Listing_Logical_Networks">Listing Logical Networks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>networks</code> collection contains all logical networks in the environment.</p>
</div>
<div class="exampleblock">
<div class="title">Example 4. Listing logical networks</div>
<div class="content">
<div class="paragraph">
<p>This example lists the logical networks in the <code>networks</code> collection and outputs some basic information about each network in the collection.</p>
</div>
<div class="paragraph">
<p><strong>V4</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4.types</span> <span style="color:#080;font-weight:bold">as</span> types

connection = sdk.Connection(
    url=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://engine.example.com/ovirt-engine/api</span><span style="color:#710">'</span></span>,
    username=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">admin@internal</span><span style="color:#710">'</span></span>,
    password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
    ca_file=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ca.pem</span><span style="color:#710">'</span></span>,
)

nws_service = connection.system_service().networks_service()

nws = nws_service.list()

<span style="color:#080;font-weight:bold">for</span> nw <span style="color:#080;font-weight:bold">in</span> nws:
    print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">%s (%s)</span><span style="color:#710">&quot;</span></span> % (nw.name, nw.id))

connection.close()</code></pre>
</div>
</div>
<div class="paragraph">
<p>In an environment where only the default management network exists, the examples output the text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">ovirtmgmt (00000000-0000-0000-0000-000000000000)</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Listing_virtual_machines_and_total_disk_size">Listing Virtual Machines and Total Disk Size</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>vms</code> collection contains a <code>disks</code> collection that describes the details of each disk attached to a virtual machine.</p>
</div>
<div class="exampleblock">
<div class="title">Example 5. Listing virtual machines and total disk size</div>
<div class="content">
<div class="paragraph">
<p>This example prints a list of virtual machines and their total disk size in bytes:</p>
</div>
<div class="paragraph">
<p><strong>V4</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4.types</span> <span style="color:#080;font-weight:bold">as</span> types

connection = sdk.Connection(
    url=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://engine.example.com/ovirt-engine/api</span><span style="color:#710">'</span></span>,
    username=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">admin@internal</span><span style="color:#710">'</span></span>,
    password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
    ca_file=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ca.pem</span><span style="color:#710">'</span></span>,
)

vms_service = connection.system_service().vms_service()

virtual_machines = vms_service.list()

<span style="color:#080;font-weight:bold">if</span> <span style="color:#369;font-weight:bold">len</span>(virtual_machines) &gt; <span style="color:#00D">0</span>:

    print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">%-30s  %s</span><span style="color:#710">&quot;</span></span> % (<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Name</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Disk Size</span><span style="color:#710">&quot;</span></span>))
    print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">==================================================</span><span style="color:#710">&quot;</span></span>)

    <span style="color:#080;font-weight:bold">for</span> virtual_machine <span style="color:#080;font-weight:bold">in</span> virtual_machines:
        vm_service = vms_service.vm_service(virtual_machine.id)
        disk_attachments = vm_service.disk_attachments_service().list()
        disk_size = <span style="color:#00D">0</span>
        <span style="color:#080;font-weight:bold">for</span> disk_attachment <span style="color:#080;font-weight:bold">in</span> disk_attachments:
            disk = connection.follow_link(disk_attachment.disk)
            disk_size += disk.provisioned_size

            print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">%-30s: %d</span><span style="color:#710">&quot;</span></span> % (virtual_machine.name, disk_size))</code></pre>
</div>
</div>
<div class="paragraph">
<p>The examples output the virtual machine names and their disk sizes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">Name                          Disk Size
==================================================
vm1                           50000000000</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Creating_NFS_Data_Storage">Creating NFS Data Storage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a {virt-product-fullname} environment is first created, it is necessary to define at least a data storage domain and an ISO storage domain. The data storage domain stores virtual disks while the ISO storage domain stores the installation media for guest operating systems.</p>
</div>
<div class="paragraph">
<p>The <code>storagedomains</code> collection contains all the storage domains in the environment and can be used to add and remove storage domains.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The code provided in this example assumes that the remote NFS share has been pre-configured for use with {virt-product-fullname}. See the <a href="{URL_virt_product_docs}{URL_format}administration_guide/index#sect-preparing_and_adding_nfs_storage"><em>Administration Guide</em></a> for more information on preparing NFS shares.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="exampleblock">
<div class="title">Example 6. Creating NFS data storage</div>
<div class="content">
<div class="paragraph">
<p>This example adds an NFS data domain to the <code>storagedomains</code> collection.</p>
</div>
<div class="paragraph">
<p><strong>V4</strong></p>
</div>
<div class="paragraph">
<p>For V4, the <code>add</code> method is used to add the new storage domain and the <code>types</code> class is used to pass the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A name for the storage domain.</p>
</li>
<li>
<p>The data center object that was retrieved from the <code>datacenters</code> collection.</p>
</li>
<li>
<p>The host object that was retrieved from the <code>hosts</code> collection.</p>
</li>
<li>
<p>The type of storage domain being added (<code>data</code>, <code>iso</code>, or <code>export</code>).</p>
</li>
<li>
<p>The storage format to use (<code>v1</code>, <code>v2</code>, or <code>v3</code>).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4.types</span> <span style="color:#080;font-weight:bold">as</span> types

<span style="color:#777"># Create the connection to the server:</span>
connection = sdk.Connection(
    url=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://engine.example.com/ovirt-engine/api</span><span style="color:#710">'</span></span>,
    username=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">admin@internal</span><span style="color:#710">'</span></span>,
    password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
    ca_file=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ca.pem</span><span style="color:#710">'</span></span>,
)

<span style="color:#777"># Get the reference to the storage domains service:</span>
sds_service = connection.system_service().storage_domains_service()

<span style="color:#777"># Create a new NFS storage domain:</span>
sd = sds_service.add(
    types.StorageDomain(
        name=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">mydata</span><span style="color:#710">'</span></span>,
        description=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">My data</span><span style="color:#710">'</span></span>,
        type=types.StorageDomainType.DATA,
        host=types.Host(
            name=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">myhost</span><span style="color:#710">'</span></span>,
        ),
        storage=types.HostStorage(
            type=types.StorageType.NFS,
            address=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">_FQDN_</span><span style="color:#710">'</span></span>,
            path=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">/nfs/ovirt/path/to/mydata</span><span style="color:#710">'</span></span>,
        ),
    ),
)

<span style="color:#777"># Wait until the storage domain is unattached:</span>
sd_service = sds_service.storage_domain_service(sd.id)
<span style="color:#080;font-weight:bold">while</span> <span style="color:#069">True</span>:
    time.sleep(<span style="color:#00D">5</span>)
    sd = sd_service.get()
    <span style="color:#080;font-weight:bold">if</span> sd.status == types.StorageDomainStatus.UNATTACHED:
        <span style="color:#080;font-weight:bold">break</span>

print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Storage Domain '%s' added (%s).</span><span style="color:#710">&quot;</span></span> % (sd.name(), sd.id()))

connection.close()</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the <code>add</code> method call is successful, the examples output the text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">Storage Domain 'mydata' added (00000000-0000-0000-0000-000000000000).</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Creating_NFS_ISO_Storage">Creating NFS ISO Storage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To create a virtual machine, you need installation media for the guest operating system. The installation media are stored in an ISO storage domain.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The code provided in this example assumes that the remote NFS share has been pre-configured for use with {virt-product-fullname}. See the <a href="{URL_virt_product_docs}{URL_format}administration_guide/index#sect-preparing_and_adding_nfs_storage"><em>Administration Guide</em></a> for more information on preparing NFS shares.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="exampleblock">
<div class="title">Example 7. Creating NFS ISO storage</div>
<div class="content">
<div class="paragraph">
<p>This example adds an NFS ISO domain to the <code>storagedomains</code> collection.</p>
</div>
<div class="paragraph">
<p><strong>V4</strong></p>
</div>
<div class="paragraph">
<p>For V4, the <code>add</code> method is used to add the new storage domain and the <code>types</code> class is used to pass the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A name for the storage domain.</p>
</li>
<li>
<p>The data center object that was retrieved from the <code>datacenters</code> collection.</p>
</li>
<li>
<p>The host object that was retrieved from the <code>hosts</code> collection.</p>
</li>
<li>
<p>The type of storage domain being added (<code>data</code>, <code>iso</code>, or <code>export</code>).</p>
</li>
<li>
<p>The storage format to use (<code>v1</code>, <code>v2</code>, or <code>v3</code>).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4.types</span> <span style="color:#080;font-weight:bold">as</span> types

connection = sdk.Connection(
    url=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://engine.example.com/ovirt-engine/api</span><span style="color:#710">'</span></span>,
    username=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">admin@internal</span><span style="color:#710">'</span></span>,
    password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
    ca_file=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ca.pem</span><span style="color:#710">'</span></span>,
)

<span style="color:#777"># Get the reference to the storage domains service:</span>
sds_service = connection.system_service().storage_domains_service()

<span style="color:#777"># Use the &quot;add&quot; method to create a new NFS storage domain:</span>
sd = sds_service.add(
    types.StorageDomain(
        name=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">myiso</span><span style="color:#710">'</span></span>,
        description=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">My ISO</span><span style="color:#710">'</span></span>,
        type=types.StorageDomainType.ISO,
        host=types.Host(
            name=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">myhost</span><span style="color:#710">'</span></span>,
        ),
        storage=types.HostStorage(
            type=types.StorageType.NFS,
            address=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">FQDN</span><span style="color:#710">'</span></span>,
            path=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">/nfs/ovirt/path/to/myiso</span><span style="color:#710">'</span></span>,
        ),
    ),
)

<span style="color:#777"># Wait until the storage domain is unattached:</span>
sd_service = sds_service.storage_domain_service(sd.id)
<span style="color:#080;font-weight:bold">while</span> <span style="color:#069">True</span>:
    time.sleep(<span style="color:#00D">5</span>)
    sd = sd_service.get()
    <span style="color:#080;font-weight:bold">if</span> sd.status == types.StorageDomainStatus.UNATTACHED:
        <span style="color:#080;font-weight:bold">break</span>

print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Storage Domain '%s' added (%s).</span><span style="color:#710">&quot;</span></span> % (sd.name(), sd.id()))

<span style="color:#777"># Close the connection to the server:</span>
connection.close()</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the <code>add</code> method call is successful, the examples output the text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">Storage Domain 'myiso' added (00000000-0000-0000-0000-000000000000).</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Attaching_Storage_Domains_to_a_Data_Center">Attaching a Storage Domain to a Data Center</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once you have added a storage domain to {virt-product-fullname}, you must attach it to a data center and activate it before it will be ready for use.</p>
</div>
<div class="exampleblock">
<div class="title">Example 8. Attaching a storage domain to a data center</div>
<div class="content">
<div class="paragraph">
<p>This example attaches an existing NFS storage domain, <code>mydata</code>, to the an existing data center, <code>Default</code>. The attach action is facilitated by the <code>add</code> method of the data center&#8217;s <code>storagedomains</code> collection. These examples may be used to attach both data and ISO storage domains.</p>
</div>
<div class="paragraph">
<p><strong>V4</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4.types</span> <span style="color:#080;font-weight:bold">as</span> types

<span style="color:#777"># Create the connection to the server:</span>
connection = sdk.Connection(
    url=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://engine.example.com/ovirt-engine/api</span><span style="color:#710">'</span></span>,
    username=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">admin@internal</span><span style="color:#710">'</span></span>,
    password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
    ca_file=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ca.pem</span><span style="color:#710">'</span></span>,
)

<span style="color:#777"># Locate the service that manages the storage domains and use it to</span>
<span style="color:#777"># search for the storage domain:</span>
sds_service = connection.system_service().storage_domains_service()
sd = sds_service.list(search=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">name=mydata</span><span style="color:#710">'</span></span>)[<span style="color:#00D">0</span>]

<span style="color:#777"># Locate the service that manages the data centers and use it to</span>
<span style="color:#777"># search for the data center:</span>
dcs_service = connection.system_service().data_centers_service()
dc = dcs_service.list(search=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">name=Default</span><span style="color:#710">'</span></span>)[<span style="color:#00D">0</span>]

<span style="color:#777"># Locate the service that manages the data center where we want to</span>
<span style="color:#777"># attach the storage domain:</span>
dc_service = dcs_service.data_center_service(dc.id)

<span style="color:#777"># Locate the service that manages the storage domains that are attached</span>
<span style="color:#777"># to the data centers:</span>
attached_sds_service = dc_service.storage_domains_service()

<span style="color:#777"># Use the &quot;add&quot; method of service that manages the attached storage</span>
<span style="color:#777"># domains to attach it:</span>
attached_sds_service.add(
    types.StorageDomain(
        id=sd.id,
    ),
)

<span style="color:#777"># Wait until the storage domain is active:</span>
attached_sd_service = attached_sds_service.storage_domain_service(sd.id)
<span style="color:#080;font-weight:bold">while</span> <span style="color:#069">True</span>:
    time.sleep(<span style="color:#00D">5</span>)
    sd = attached_sd_service.get()
    <span style="color:#080;font-weight:bold">if</span> sd.status == types.StorageDomainStatus.ACTIVE:
        <span style="color:#080;font-weight:bold">break</span>

print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Attached data storage domain '%s' to data center '%s' (Status: %s).</span><span style="color:#710">&quot;</span></span> %
  (sd.name(), dc.name(), sd.status.state()))

<span style="color:#777"># Close the connection to the server:</span>
connection.close()</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the calls to the <code>add</code> methods are successful, the examples output the following text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">Attached data storage domain 'data1' to data center 'Default' (Status: maintenance).</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Status: maintenance</code> indicates that the storage domains still need to be activated.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Activating_a_Storage_Domain">Activating a Storage Domain</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once you have added a storage domain to {virt-product-fullname} and attached it to a data center, you must activate it before it will be ready for use.</p>
</div>
<div class="exampleblock">
<div class="title">Example 9. Activating a storage domain</div>
<div class="content">
<div class="paragraph">
<p>This example activates an NFS storage domain, <code>mydata</code>, attached to the data center, <code>Default</code>. The <code>activate</code> action is facilitated by the <code>activate</code> method of the storage domain.</p>
</div>
<div class="paragraph">
<p><strong>V4</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk

connection = sdk.Connection
    url=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://engine.example.com/ovirt-engine/api</span><span style="color:#710">'</span></span>,
    username=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">admin@internal</span><span style="color:#710">'</span></span>,
    password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
    ca_file=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ca.pem</span><span style="color:#710">'</span></span>,
)

<span style="color:#777"># Locate the service that manages the storage domains and use it to</span>
<span style="color:#777"># search for the storage domain:</span>
sds_service = connection.system_service().storage_domains_service()
sd = sds_service.list(search=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">name=mydata</span><span style="color:#710">'</span></span>)[<span style="color:#00D">0</span>]

<span style="color:#777"># Locate the service that manages the data centers and use it to</span>
<span style="color:#777"># search for the data center:</span>
dcs_service = connection.system_service().data_centers_service()
dc = dcs_service.list(search=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">name=Default</span><span style="color:#710">'</span></span>)[<span style="color:#00D">0</span>]

<span style="color:#777"># Locate the service that manages the data center where we want to</span>
<span style="color:#777"># attach the storage domain:</span>
dc_service = dcs_service.data_center_service(dc.id)

<span style="color:#777"># Locate the service that manages the storage domains that are attached</span>
<span style="color:#777"># to the data centers:</span>
attached_sds_service = dc_service.storage_domains_service()

<span style="color:#777"># Activate storage domain:</span>
attached_sd_service = attached_sds_service.storage_domain_service(sd.id)
attached_sd_service.activate()

<span style="color:#777"># Wait until the storage domain is active:</span>
<span style="color:#080;font-weight:bold">while</span> <span style="color:#069">True</span>:
    time.sleep(<span style="color:#00D">5</span>)
    sd = attached_sd_service.get()
    <span style="color:#080;font-weight:bold">if</span> sd.status == types.StorageDomainStatus.ACTIVE:
        <span style="color:#080;font-weight:bold">break</span>

print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Attached data storage domain '%s' to data center '%s' (Status: %s).</span><span style="color:#710">&quot;</span></span> %
  (sd.name(), dc.name(), sd.status.state()))

<span style="color:#777"># Close the connection to the server:</span>
connection.close()</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the <code>activate</code> requests are successful, the examples output the text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">Activated storage domain 'mydata' in data center 'Default' (Status: active).</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Status: active</code> indicates that the storage domains have been activated.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Listing_Files_in_an_ISO_Storage_Domain">Listing Files in an ISO Storage Domain</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>storagedomains</code> collection contains a <code>files</code> collection that describes the files in a storage domain.</p>
</div>
<div class="exampleblock">
<div class="title">Example 10. Listing Files in an ISO Storage Domain</div>
<div class="content">
<div class="paragraph">
<p>This example prints a list of the ISO files in each ISO storage domain:</p>
</div>
<div class="paragraph">
<p><strong>V4</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4.types</span> <span style="color:#080;font-weight:bold">as</span> types

connection = sdk.Connection(
    url=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://engine.example.com/ovirt-engine/api</span><span style="color:#710">'</span></span>,
    username=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">admin@internal</span><span style="color:#710">'</span></span>,
    password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
    ca_file=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ca.pem</span><span style="color:#710">'</span></span>,
)

storage_domains_service = connection.system_service().storage_domains_service()

storage_domains = storage_domains_service.list()

<span style="color:#080;font-weight:bold">for</span> storage_domain <span style="color:#080;font-weight:bold">in</span> storage_domains:
    <span style="color:#080;font-weight:bold">if</span>(storage_domain.type == types.StorageDomainType.ISO):
        print(storage_domain.name + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">:</span><span style="color:#b0b">\n</span><span style="color:#710">&quot;</span></span>)
        files = storage_domain.files_service().list()

        <span style="color:#080;font-weight:bold">for</span> <span style="color:#369;font-weight:bold">file</span> <span style="color:#080;font-weight:bold">in</span> files:
            print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">%s</span><span style="color:#710">&quot;</span></span> % <span style="color:#369;font-weight:bold">file</span>.name + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#b0b">\n</span><span style="color:#710">&quot;</span></span>)

connection.close()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The examples output the text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ISO_storage_domain:
file1
file2</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Creating_a_Virtual_Machine">Creating a Virtual Machine</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Virtual machine creation is performed in several steps. The first step, covered here, is to create the virtual machine object itself.</p>
</div>
<div class="exampleblock">
<div class="title">Example 11. Creating a virtual machine</div>
<div class="content">
<div class="paragraph">
<p>This example creates a virtual machine, <code>vm1</code>, with the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>512 MB of memory, expressed in bytes.</p>
</li>
<li>
<p>Attached to the <code>Default</code> cluster, and therefore the <code>Default</code> data center.</p>
</li>
<li>
<p>Based on the default <code>Blank</code> template.</p>
</li>
<li>
<p>Boots from the virtual hard disk drive.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>V4</strong></p>
</div>
<div class="paragraph">
<p>In V4, the options are added as <code>types</code>, using the <code>add</code> method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4.types</span> <span style="color:#080;font-weight:bold">as</span> types

connection = sdk.Connection(
    url=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://engine.example.com/ovirt-engine/api</span><span style="color:#710">'</span></span>,
    username=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">admin@internal</span><span style="color:#710">'</span></span>,
    password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
    ca_file=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ca.pem</span><span style="color:#710">'</span></span>,
)

<span style="color:#777"># Get the reference to the &quot;vms&quot; service:</span>
vms_service = connection.system_service().vms_service()

<span style="color:#777"># Use the &quot;add&quot; method to create a new virtual machine:</span>
vms_service.add(
    types.Vm(
        name=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">vm1</span><span style="color:#710">'</span></span>,
        memory = <span style="color:#00D">512</span>*<span style="color:#00D">1024</span>*<span style="color:#00D">1024</span>
        cluster=types.Cluster(
            name=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Default</span><span style="color:#710">'</span></span>,
        ),
        template=types.Template(
            name=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Blank</span><span style="color:#710">'</span></span>,
        ),
        os=types.OperatingSystem(boot=types.Boot(devices=[types.BootDevice.HD)]
    ),
)

print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Virtual machine '%s' added.</span><span style="color:#710">&quot;</span></span> % vm.name)

<span style="color:#777"># Close the connection to the server:</span>
connection.close()</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the <code>add</code> request is successful, the examples output the text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">Virtual machine 'vm1' added.</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Creating_a_Virtual_NIC">Creating a Virtual NIC</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To ensure that a newly created virtual machine has network access, you must create and attach a virtual NIC.</p>
</div>
<div class="exampleblock">
<div class="title">Example 12. Creating a virtual NIC</div>
<div class="content">
<div class="paragraph">
<p>This example creates a NIC, <code>nic1</code>, and attach it to a virtual machine, <code>vm1</code>. The NIC in this example is a <code>virtio</code> network device and attached to the <code>ovirtmgmt</code> management network.</p>
</div>
<div class="paragraph">
<p><strong>V4</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4.types</span> <span style="color:#080;font-weight:bold">as</span> types

connection = sdk.Connection(
    url=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://engine.example.com/ovirt-engine/api</span><span style="color:#710">'</span></span>,
    username=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">admin@internal</span><span style="color:#710">'</span></span>,
    password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
    ca_file=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ca.pem</span><span style="color:#710">'</span></span>,
)

<span style="color:#777"># Locate the virtual machines service and use it to find the virtual</span>
<span style="color:#777"># machine:</span>
vms_service = connection.system_service().vms_service()
vm = vms_service.list(search=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">name=vm1</span><span style="color:#710">'</span></span>)[<span style="color:#00D">0</span>]

<span style="color:#777"># Locate the service that manages the network interface cards of the</span>
<span style="color:#777"># virtual machine:</span>
nics_service = vms_service.vm_service(vm.id).nics_service()

<span style="color:#777"># Locate the vnic profiles service and use it to find the ovirmgmt</span>
<span style="color:#777"># network's profile id:</span>
profiles_service = connection.system_service().vnic_profiles_service()
profile_id = <span style="color:#069">None</span>
<span style="color:#080;font-weight:bold">for</span> profile <span style="color:#080;font-weight:bold">in</span> profiles_service.list():
    <span style="color:#080;font-weight:bold">if</span> profile.name == <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ovirtmgmt</span><span style="color:#710">'</span></span>:
        profile_id = profile.id
        <span style="color:#080;font-weight:bold">break</span>

<span style="color:#777"># Use the &quot;add&quot; method of the network interface cards service to add the</span>
<span style="color:#777"># new network interface card:</span>

nic = nics_service.add(
    types.Nic(
        name=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">nic1</span><span style="color:#710">'</span></span>,
        interface=types.NicInterface.VIRTIO,
        vnic_profile=types.VnicProfile(id=profile_id),
    ),
)

print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Network interface '%s' added to '%s'.</span><span style="color:#710">&quot;</span></span> % (nic.name, vm.name))

connection.close()</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the <code>add</code> request is successful, the examples output the text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">Network interface 'nic1' added to 'vm1'.</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Creating_a_Virtual_Machine_Disk">Creating a Virtual Machine Disk</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To ensure that a newly created virtual machine has access to persistent storage, you must create and attach a disk.</p>
</div>
<div class="exampleblock">
<div class="title">Example 13. Creating a virtual machine disk</div>
<div class="content">
<div class="paragraph">
<p>This example creates an 8 GB <code>virtio</code> disk and attach it to a virtual machine, <code>vm1</code>. The disk has the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Stored on the storage domain named <code>data1</code>.</p>
</li>
<li>
<p>8 GB in size.</p>
</li>
<li>
<p><code>system</code> type disk (as opposed to <code>data</code>).</p>
</li>
<li>
<p><code>virtio</code> storage device.</p>
</li>
<li>
<p><code>COW</code> format.</p>
</li>
<li>
<p>Marked as a usable boot device.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>V4</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4.types</span> <span style="color:#080;font-weight:bold">as</span> types

connection = sdk.Connection(
    url=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://engine.example.com/ovirt-engine/api</span><span style="color:#710">'</span></span>,
    username=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">admin@internal</span><span style="color:#710">'</span></span>,
    password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
    ca_file=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ca.pem</span><span style="color:#710">'</span></span>,
)

<span style="color:#777"># Locate the virtual machines service and use it to find the virtual</span>
<span style="color:#777"># machine:</span>
vms_service = connection.system_service().vms_service()
vm = vms_service.list(search=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">name=vm1</span><span style="color:#710">'</span></span>)[<span style="color:#00D">0</span>]

<span style="color:#777"># Locate the service that manages the disk attachments of the virtual</span>
<span style="color:#777"># machine:</span>
disk_attachments_service = vms_service.vm_service(vm.id).disk_attachments_service()

<span style="color:#777"># Use the &quot;add&quot; method of the disk attachments service to add the disk.</span>
<span style="color:#777"># Note that the size of the disk, the `provisioned_size` attribute, is</span>
<span style="color:#777"># specified in bytes, so to create a disk of 10 GiB the value should</span>
<span style="color:#777"># be 10 * 2^30.</span>
disk_attachment = disk_attachments_service.add(
    types.DiskAttachment(
        disk=types.Disk(
            format=types.DiskFormat.COW,
            provisioned_size=<span style="color:#00D">8</span>*<span style="color:#00D">1024</span>*<span style="color:#00D">1024</span>,
            storage_domains=[
                types.StorageDomain(
                    name=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">data1</span><span style="color:#710">'</span></span>,
                ),
            ],
        ),
        interface=types.DiskInterface.VIRTIO,
        bootable=<span style="color:#069">True</span>,
        active=<span style="color:#069">True</span>,
    ),
)

<span style="color:#777"># Wait until the disk status is OK:</span>
disks_service = connection.system_service().disks_service()
disk_service = disks_service.disk_service(disk_attachment.disk.id)
<span style="color:#080;font-weight:bold">while</span> <span style="color:#069">True</span>:
    time.sleep(<span style="color:#00D">5</span>)
    disk = disk_service.get()
    <span style="color:#080;font-weight:bold">if</span> disk.status == types.DiskStatus.OK:
        <span style="color:#080;font-weight:bold">break</span>

print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Disk '%s' added to '%s'.</span><span style="color:#710">&quot;</span></span> % (disk.name(), vm.name()))

<span style="color:#777"># Close the connection to the server:</span>
connection.close()</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the <code>add</code> request is successful, the examples output the text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">Disk 'vm1_Disk1' added to 'vm1'.</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Attaching_an_ISO_Image_to_a_Virtual_Machine">Attaching an ISO Image to a Virtual Machine</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To install a guest operating system on a newly created virtual machine, you must attach an ISO file containing the operating system installation media. To locate the ISO file, see <a href="#Listing_Files_in_an_ISO_Storage_Domain">Listing Files in an ISO Storage Domain</a>.</p>
</div>
<div class="exampleblock">
<div class="title">Example 14. Attaching an ISO image to a virtual machine</div>
<div class="content">
<div class="paragraph">
<p>This example attaches <strong>my_iso_file.iso</strong> to the <code>vm1</code> virtual machine, using the <code>add</code> method of the virtual machine&#8217;s <code>cdroms</code> collection.</p>
</div>
<div class="paragraph">
<p><strong>V4</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4.types</span> <span style="color:#080;font-weight:bold">as</span> types

connection = sdk.Connection(
    url=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://engine.example.com/ovirt-engine/api</span><span style="color:#710">'</span></span>,
    username=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">admin@internal</span><span style="color:#710">'</span></span>,
    password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
    ca_file=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ca.pem</span><span style="color:#710">'</span></span>,
)

<span style="color:#777"># Get the reference to the &quot;vms&quot; service:</span>
vms_service = connection.system_service().vms_service()

<span style="color:#777"># Find the virtual machine:</span>
vm = vms_service.list(search=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">name=vm1</span><span style="color:#710">'</span></span>)[<span style="color:#00D">0</span>]

<span style="color:#777"># Locate the service that manages the virtual machine:</span>
vm_service = vms_service.vm_service(vm.id)

<span style="color:#777"># Locate the service that manages the CDROM devices of the virtual machine:</span>
cdroms_service = vm_service.cdroms_service()

<span style="color:#777"># Get the first CDROM:</span>
cdrom = cdroms_service.list()[<span style="color:#00D">0</span>]

<span style="color:#777"># Locate the service that manages the CDROM device found in previous step:</span>
cdrom_service = cdroms_service.cdrom_service(cdrom.id)

<span style="color:#777"># Change the CD of the VM to 'my_iso_file.iso'. By default the</span>
<span style="color:#777"># operation permanently changes the disk that is visible to the</span>
<span style="color:#777"># virtual machine after the next boot, but has no effect</span>
<span style="color:#777"># on the currently running virtual machine. If you want to change the</span>
<span style="color:#777"># disk that is visible to the current running virtual machine, change</span>
<span style="color:#777"># the `current` parameter's value to `True`.</span>
cdrom_service.update(
    cdrom=types.Cdrom(
        file=types.File(
            id=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">my_iso_file.iso</span><span style="color:#710">'</span></span>
        ),
    ),
    current=<span style="color:#069">False</span>,
)

print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Attached CD to '%s'.</span><span style="color:#710">&quot;</span></span> % vm.name())

<span style="color:#777"># Close the connection to the server:</span>
connection.close()</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the <code>add</code> request is successful, the examples output the text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">Attached CD to 'vm1'.</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 15. Ejecting a cdrom from a virtual machine</div>
<div class="content">
<div class="paragraph">
<p>This example ejects an ISO image from a virtual machine&#8217;s <code>cdrom</code> collection.</p>
</div>
<div class="paragraph">
<p><strong>V4</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4.types</span> <span style="color:#080;font-weight:bold">as</span> types

connection = sdk.Connection(
    url=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://engine.example.com/ovirt-engine/api</span><span style="color:#710">'</span></span>,
    username=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">admin@internal</span><span style="color:#710">'</span></span>,
    password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
    ca_file=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ca.pem</span><span style="color:#710">'</span></span>,
)

<span style="color:#777"># Get the reference to the &quot;vms&quot; service:</span>
vms_service = connection.system_service().vms_service()

<span style="color:#777"># Find the virtual machine:</span>
vm = vms_service.list(search=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">name=vm1</span><span style="color:#710">'</span></span>)[<span style="color:#00D">0</span>]

<span style="color:#777"># Locate the service that manages the virtual machine:</span>
vm_service = vms_service.vm_service(vm.id)

<span style="color:#777"># Locate the service that manages the CDROM devices of the VM:</span>
cdroms_service = vm_service.cdroms_service()

<span style="color:#777"># Get the first found CDROM:</span>
cdrom = cdroms_service.list()[<span style="color:#00D">0</span>]

<span style="color:#777"># Locate the service that manages the CDROM device found in previous step</span>
<span style="color:#777"># of the VM:</span>
cdrom_service = cdroms_service.cdrom_service(cdrom.id)

cdrom_service.remove()

print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Removed CD from '%s'.</span><span style="color:#710">&quot;</span></span> % vm.name())

connection.close()</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the <code>delete</code> or <code>remove</code> request is successful, the examples output the text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">Removed CD from 'vm1'.</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Detaching_a_Disk">Detaching a Disk</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can detach a disk from a virtual machine.</p>
</div>
<div class="paragraph">
<div class="title">Detaching a disk</div>
<p><strong>V4</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4.types</span> <span style="color:#080;font-weight:bold">as</span> types

connection = sdk.Connection(
    url=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://engine.example.com/ovirt-engine/api</span><span style="color:#710">'</span></span>,
    username=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">admin@internal</span><span style="color:#710">'</span></span>,
    password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
    ca_file=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ca.pem</span><span style="color:#710">'</span></span>,
)

<span style="color:#777"># Get the reference to the &quot;vms&quot; service:</span>
vms_service = connection.system_service().vms_service()

<span style="color:#777"># Find the virtual machine:</span>
vm = vms_service.list(search=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">name=vm1</span><span style="color:#710">'</span></span>)[<span style="color:#00D">0</span>]

<span style="color:#777"># Locate the service that manages the virtual machine:</span>
vm_service = vms_service.vm_service(vm.id)

attachments_service = vm_service.disk_attachments_service()
attachment = <span style="color:#369;font-weight:bold">next</span>(
    (a <span style="color:#080;font-weight:bold">for</span> a <span style="color:#080;font-weight:bold">in</span> disk_attachments <span style="color:#080;font-weight:bold">if</span> a.disk.id == disk.id), <span style="color:#069">None</span>
)

<span style="color:#777"># Remove the attachment. The default behavior is that the disk is detached</span>
<span style="color:#777"># from the virtual machine, but not deleted from the system. If you wish to</span>
<span style="color:#777"># delete the disk, change the detach_only parameter to &quot;False&quot;.</span>
attachment.remove(detach_only=<span style="color:#069">True</span>)

print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Detached disk %s successfully!</span><span style="color:#710">&quot;</span></span> % attachment)

<span style="color:#777"># Close the connection to the server:</span>
connection.close()</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the <code>delete</code> or <code>remove</code> request is successful, the examples output the text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">Detached disk vm1_disk1 successfully!</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Starting_a_Virtual_Machine">Starting a Virtual Machine</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can start a virtual machine.</p>
</div>
<div class="exampleblock">
<div class="title">Example 16. Starting a virtual machine</div>
<div class="content">
<div class="paragraph">
<p>This example starts the virtual machine using the <code>start</code> method.</p>
</div>
<div class="paragraph">
<p><strong>V4</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">time</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4.types</span> <span style="color:#080;font-weight:bold">as</span> types

connection = sdk.Connection(
    url=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://engine.example.com/ovirt-engine/api</span><span style="color:#710">'</span></span>,
    username=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">admin@internal</span><span style="color:#710">'</span></span>,
    password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
    ca_file=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ca.pem</span><span style="color:#710">'</span></span>,
)

<span style="color:#777"># Get the reference to the &quot;vms&quot; service:</span>
vms_service = connection.system_service().vms_service()

<span style="color:#777"># Find the virtual machine:</span>
vm = vms_service.list(search=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">name=vm1</span><span style="color:#710">'</span></span>)[<span style="color:#00D">0</span>]

<span style="color:#777"># Locate the service that manages the virtual machine, as that is where</span>
<span style="color:#777"># the action methods are defined:</span>
vm_service = vms_service.vm_service(vm.id)

<span style="color:#777"># Call the &quot;start&quot; method of the service to start it:</span>
vm_service.start()

<span style="color:#777"># Wait until the virtual machine is up:</span>
<span style="color:#080;font-weight:bold">while</span> <span style="color:#069">True</span>:
    time.sleep(<span style="color:#00D">5</span>)
    vm = vm_service.get()
    <span style="color:#080;font-weight:bold">if</span> vm.status == types.VmStatus.UP:
        <span style="color:#080;font-weight:bold">break</span>

print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Started '%s'.</span><span style="color:#710">&quot;</span></span> % vm.name())

<span style="color:#777"># Close the connection to the server:</span>
connection.close()</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the <code>start</code> request is successful, the examples output the text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">Started 'vm1'.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>UP</code> status indicates that the virtual machine is running.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Starting_a_Virtual_Machine_with_Overridden_Parameters">Starting a Virtual Machine with Overridden Parameters</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can start a virtual machine, overriding its default parameters.</p>
</div>
<div class="exampleblock">
<div class="title">Example 17. Starting a virtual machine with overridden parameters</div>
<div class="content">
<div class="paragraph">
<p>This example boots a virtual machine with a Windows ISO and attach the <code>virtio-win_x86.vfd</code> floppy disk, which contains Windows drivers. This action is equivalent to using the <strong>Run Once</strong> window in the Administration Portal to start a virtual machine.</p>
</div>
<div class="paragraph">
<p><strong>V4</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">time</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4.types</span> <span style="color:#080;font-weight:bold">as</span> types

connection = sdk.Connection(
    url=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://engine.example.com/ovirt-engine/api</span><span style="color:#710">'</span></span>,
    username=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">admin@internal</span><span style="color:#710">'</span></span>,
    password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
    ca_file=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ca.pem</span><span style="color:#710">'</span></span>,
)

<span style="color:#777"># Get the reference to the &quot;vms&quot; service:</span>
vms_service = connection.system_service().vms_service()

<span style="color:#777"># Find the virtual machine:</span>
vm = vms_service.list(search=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">name=vm1</span><span style="color:#710">'</span></span>)[<span style="color:#00D">0</span>]

<span style="color:#777"># Locate the service that manages the virtual machine:</span>
vm_service = vms_service.vm_service(vm.id)

<span style="color:#777"># Locate the service that manages the CDROM devices of the virtual machine:</span>
cdroms_service = vm_service.cdroms_service()

<span style="color:#777"># Get the first CDROM:</span>
cdrom = cdroms_service.list()[<span style="color:#00D">0</span>]

<span style="color:#777"># Locate the service that manages the CDROM device found in previous step:</span>
cdrom_service = cdroms_service.cdrom_service(cdrom.id)

<span style="color:#777"># Change the CD of the VM to 'windows_example.iso':</span>
cdrom_service.update(
    cdrom=types.Cdrom(
        file=types.File(
            id=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">windows_example.iso</span><span style="color:#710">'</span></span>
        ),
    ),
    current=<span style="color:#069">False</span>,
)

<span style="color:#777"># Call the &quot;start&quot; method of the service to start it:</span>
vm_service.start(
    vm=types.Vm(
        os=types.OperatingSystem(
            boot=types.Boot(
                devices=[
                    types.BootDevice.CDROM,
                ]
            )
        ),
    )
)

<span style="color:#777"># Wait until the virtual machine's status is &quot;UP&quot;:</span>
<span style="color:#080;font-weight:bold">while</span> <span style="color:#069">True</span>:
    time.sleep(<span style="color:#00D">5</span>)
    vm = vm_service.get()
    <span style="color:#080;font-weight:bold">if</span> vm.status == types.VmStatus.UP:
        <span style="color:#080;font-weight:bold">break</span>

print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Started '%s'.</span><span style="color:#710">&quot;</span></span> % vm.name())

<span style="color:#777"># Close the connection to the server:</span>
connection.close()</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The CD image and floppy disk file must be available to the virtual machine. See <a href="{URL_virt_product_docs}{URL_format}administration_guide/index#Uploading_Images_to_a_Data_Storage_Domain">Uploading Images to a Data Storage Domain</a> for details.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Starting_a_Virtual_Machine_with_Cloud-Init">Starting a Virtual Machine with Cloud-Init</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can start a virtual machine with a specific configuration, using the <code>Cloud-Init</code> tool.</p>
</div>
<div class="exampleblock">
<div class="title">Example 18. Starting a virtual machine with Cloud-Init</div>
<div class="content">
<div class="paragraph">
<p>This example shows you how to start a virtual machine using the Cloud-Init tool to set a host name and a static IP for the <code>eth0</code> interface.</p>
</div>
<div class="paragraph">
<p><strong>V4</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4.types</span> <span style="color:#080;font-weight:bold">as</span> types

connection = sdk.Connection(
    url=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://engine.example.com/ovirt-engine/api</span><span style="color:#710">'</span></span>,
    username=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">admin@internal</span><span style="color:#710">'</span></span>,
    password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
    ca_file=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ca.pem</span><span style="color:#710">'</span></span>,
)

<span style="color:#777"># Find the virtual machine:</span>
vms_service = connection.system_service().vms_service()
vm = vms_service.list(search = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">name=vm1</span><span style="color:#710">'</span></span>)[<span style="color:#00D">0</span>]

<span style="color:#777"># Find the service that manages the virtual machine:</span>
vm_service = vms_service.vm_service(vm.id)

<span style="color:#777"># Start the virtual machine enabling cloud-init and providing the</span>
<span style="color:#777"># password for the `root` user and the network configuration:</span>
vm_service.start(
    use_cloud_init=<span style="color:#069">True</span>,
    vm=types.Vm(
        initialization=types.Initialization(
        user_name=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">root</span><span style="color:#710">'</span></span>,
        root_password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
        host_name=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">MyHost.example.com</span><span style="color:#710">'</span></span>,
        nic_configurations=[
            types.NicConfiguration(
                name=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">eth0</span><span style="color:#710">'</span></span>,
                on_boot=<span style="color:#069">True</span>,
                boot_protocol=types.BootProtocol.STATIC,
                ip=types.Ip(
                    version=types.IpVersion.V4,
                    address=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">10.10.10.1</span><span style="color:#710">'</span></span>,
                    netmask=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">255.255.255.0</span><span style="color:#710">'</span></span>,
                    gateway=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">10.10.10.1</span><span style="color:#710">'</span></span>
                )
            )
        )
    )
)

<span style="color:#777"># Close the connection to the server:</span>
connection.close()</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Checking_System_Events">Checking System Events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>{virt-product-fullname} {engine-name} records and logs many system events. These event logs are accessible through the user interface, the system log files, and using the API. The <code>ovirtsdk</code> library exposes events using the <code>events</code> collection.</p>
</div>
<div class="exampleblock">
<div class="title">Example 19. Checking system events</div>
<div class="content">
<div class="paragraph">
<p>In this example the <code>events</code> collection is listed.</p>
</div>
<div class="paragraph">
<p>The <code>query</code> parameter of the <code>list</code> method is used to ensure that all available pages of results are returned. By default the <code>list</code> method returns only the first page of results, which is <code>100</code> records in length.</p>
</div>
<div class="paragraph">
<p>The returned list is sorted in reverse chronological order, to display the events in the order in which they occurred.</p>
</div>
<div class="paragraph">
<p><strong>V4</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4</span> <span style="color:#080;font-weight:bold">as</span> sdk
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ovirtsdk4.types</span> <span style="color:#080;font-weight:bold">as</span> types

connection = sdk.Connection(
    url=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://engine.example.com/ovirt-engine/api</span><span style="color:#710">'</span></span>,
    username=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">admin@internal</span><span style="color:#710">'</span></span>,
    password=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>,
    ca_file=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ca.pem</span><span style="color:#710">'</span></span>,
)

<span style="color:#777"># Find the service that manages the collection of events:</span>
events_service = connection.system_service().events_service()

page_number = <span style="color:#00D">1</span>
events = events_service.list(search=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">page %s</span><span style="color:#710">'</span></span> % page_number)
<span style="color:#080;font-weight:bold">while</span> events:
    <span style="color:#080;font-weight:bold">for</span> event <span style="color:#080;font-weight:bold">in</span> events:
        print(
            <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">%s %s CODE %s - %s</span><span style="color:#710">&quot;</span></span> % (
                event.time,
                event.severity,
                event.code,
                event.description,
            )
        )
    page_number = page_number + <span style="color:#00D">1</span>
    events = events_service.list(search=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">page %s</span><span style="color:#710">'</span></span> % page_number)

<span style="color:#777"># Close the connection to the server:</span>
connection.close()</code></pre>
</div>
</div>
<div class="paragraph">
<p>These examples output events in the following format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">YYYY-MM-DD_T_HH:MM:SS NORMAL CODE 30 - User admin@internal logged in.
YYYY-MM-DD_T_HH:MM:SS NORMAL CODE 153 - VM vm1 was started by admin@internal (Host: MyHost).
YYYY-MM-DD_T_HH:MM:SS NORMAL CODE 30 - User admin@internal logged in.</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>



        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/2828/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/2828/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/2828/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/2828/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2022 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=documentation&amp;title=Issue:%20/documentation/doc-Python_SDK_Guide/chap-Python_Examples.html&amp;template=issue_template_documentation.md' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/master/source/documentation/doc-Python_SDK_Guide/chap-Python_Examples.adoc' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
